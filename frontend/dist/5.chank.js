(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[5],{

/***/ "./frontend/src/components/ThePlanetsCalc.vue":
/*!****************************************************!*\
  !*** ./frontend/src/components/ThePlanetsCalc.vue ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ThePlanetsCalc_vue_vue_type_template_id_0c7c513e_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ThePlanetsCalc.vue?vue&type=template&id=0c7c513e&scoped=true& */ "./frontend/src/components/ThePlanetsCalc.vue?vue&type=template&id=0c7c513e&scoped=true&");
/* harmony import */ var _ThePlanetsCalc_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ThePlanetsCalc.vue?vue&type=script&lang=js& */ "./frontend/src/components/ThePlanetsCalc.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport *//* harmony import */ var _ThePlanetsCalc_vue_vue_type_style_index_0_id_0c7c513e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css& */ "./frontend/src/components/ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css&");
/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");






/* normalize component */

var component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _ThePlanetsCalc_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _ThePlanetsCalc_vue_vue_type_template_id_0c7c513e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"],
  _ThePlanetsCalc_vue_vue_type_template_id_0c7c513e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  "0c7c513e",
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "frontend/src/components/ThePlanetsCalc.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./frontend/src/components/ThePlanetsCalc.vue?vue&type=script&lang=js&":
/*!*****************************************************************************!*\
  !*** ./frontend/src/components/ThePlanetsCalc.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/babel-loader/lib!../../../node_modules/vue-loader/lib??vue-loader-options!./ThePlanetsCalc.vue?vue&type=script&lang=js& */ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./frontend/src/components/ThePlanetsCalc.vue?vue&type=script&lang=js&");
/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__["default"] = (_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./frontend/src/components/ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css&":
/*!*************************************************************************************************************!*\
  !*** ./frontend/src/components/ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css& ***!
  \*************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_style_index_0_id_0c7c513e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-style-loader!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib??vue-loader-options!./ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css& */ "./node_modules/vue-style-loader/index.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/vue-loader/lib/index.js?!./frontend/src/components/ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css&");
/* harmony import */ var _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_style_index_0_id_0c7c513e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_style_index_0_id_0c7c513e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_style_index_0_id_0c7c513e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_style_index_0_id_0c7c513e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_style_index_0_id_0c7c513e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ "./frontend/src/components/ThePlanetsCalc.vue?vue&type=template&id=0c7c513e&scoped=true&":
/*!***********************************************************************************************!*\
  !*** ./frontend/src/components/ThePlanetsCalc.vue?vue&type=template&id=0c7c513e&scoped=true& ***!
  \***********************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_template_id_0c7c513e_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib??vue-loader-options!./ThePlanetsCalc.vue?vue&type=template&id=0c7c513e&scoped=true& */ "./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./frontend/src/components/ThePlanetsCalc.vue?vue&type=template&id=0c7c513e&scoped=true&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_template_id_0c7c513e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_vue_loader_lib_index_js_vue_loader_options_ThePlanetsCalc_vue_vue_type_template_id_0c7c513e_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js?!./frontend/src/components/ThePlanetsCalc.vue?vue&type=script&lang=js&":
/*!***************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./frontend/src/components/ThePlanetsCalc.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_modules_formatKey__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../js/modules/formatKey */ "./frontend/src/js/modules/formatKey.js");
/* harmony import */ var _js_modules_formatValue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../js/modules/formatValue */ "./frontend/src/js/modules/formatValue.js");
/* harmony import */ var _DisplayObjectTable_vue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DisplayObjectTable.vue */ "./frontend/src/components/DisplayObjectTable.vue");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//



var localStorageKey = 'planetsCalc';
var keys = ['CreditStorage', 'FuelStorage', 'CreditsPerHour', 'FuelPerHour', 'ShipmentsCRValuePerDay'];
var keysModifiers = ['CreditStorageModifier', 'FuelStorageModifier', 'CreditIncomeModifier', 'FuelIncomeModifier', 'CreditShipmentModifier'];
var keysTotal = ['Cost', 'TimeToUpgrade'];
var rows = ['actually', 'plan', 'result'];
var keysAliasesTS = {
  ShipmentsCRValuePerDay: 'TotalShipmentCRPerDay',
  Cost: 'Cost',
  TimeToUpgrade: 'ConstructionTime'
};
/* harmony default export */ __webpack_exports__["default"] = ({
  name: 'ThePlanetsCalc',
  components: {
    VTable: _DisplayObjectTable_vue__WEBPACK_IMPORTED_MODULE_2__["default"]
  },
  data: function data() {
    return {
      input: {
        "static": {
          head: [],
          body: [],
          maxLevel: 0
        },
        keys: [],
        maxUpgradeLevel: []
      },
      output: {
        calculated: {},
        total: {}
      },
      data: {
        planets: {},
        levels: {},
        tradingStations: {}
      },
      storage: {
        actually: {},
        plan: {}
      },
      allDataLoaded: false
    };
  },
  mounted: function mounted() {
    if (localStorage.getItem(localStorageKey)) {
      try {
        this.storage = JSON.parse(localStorage.getItem(localStorageKey));
      } catch (e) {
        localStorage.removeItem(localStorageKey);
      }
    }
  },
  created: function created() {
    this.loadData();
  },
  methods: {
    loadData: function loadData() {
      var _this = this;

      Promise.all([__webpack_require__.e(/*! import() */ 2).then(__webpack_require__.t.bind(null, /*! ../../../data/planets */ "./data/planets.js", 7)), __webpack_require__.e(/*! import() */ 1).then(__webpack_require__.t.bind(null, /*! ../../../data/planet_levels */ "./data/planet_levels.js", 7)), __webpack_require__.e(/*! import() */ 3).then(__webpack_require__.t.bind(null, /*! ../../../data/spacebuildings */ "./data/spacebuildings.js", 7))]).then(function (_ref) {
        var _ref2 = _slicedToArray(_ref, 3),
            planets = _ref2[0],
            planetLevels = _ref2[1],
            spacebuildings = _ref2[2];

        _this.data.planets = planets.data.yellowstarTable;
        _this.data.levels = planetLevels.data;
        _this.data.tradingStations = spacebuildings.data.TradingStation;
      }).then(this.generateInputTable).then(this.updateOutput).then(function () {
        return _this.allDataLoaded = true;
      })["catch"](console.error);
    },
    createCells: function createCells() {
      var _this2 = this;

      keys.forEach(function (key) {
        var result = {};
        rows.forEach(function (e) {
          return result[e] = 0;
        });

        _this2.$set(_this2.output.calculated, key, result);
      });
      keysTotal.forEach(function (key) {
        _this2.$set(_this2.output.total, key, 0);
      });
    },
    generateInputTable: function generateInputTable() {
      var obj = {
        Name: this.data.planets.Name,
        MaxUpgradeLevel: this.data.planets.MaxUpgradeLevel,
        TID: this.data.planets.TID,
        maxLevel: this.data.planets.maxLevel
      }; // добавить торги

      for (var i = 0; this.data.tradingStations.MaxOnOwnSolarSystem > i; i++) {
        obj.Name.push(this.data.tradingStations.Name + '_' + i);
        obj.MaxUpgradeLevel.push(this.data.tradingStations.maxLevel);
        obj.TID.push(this.data.tradingStations.TID);
        obj.maxLevel++;
      }

      this.input.keys = obj.Name;
      this.input.maxUpgradeLevel = obj.MaxUpgradeLevel;
      this.input["static"].head.push('TID');
      this.input["static"].body.push(obj.TID);
      this.input["static"].maxLevel = obj.maxLevel;
    },
    getFormatKey: function getFormatKey() {
      var _this3 = this;

      var $t = function $t(key) {
        return _this3.$t.call(_this3, key);
      };

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      return _js_modules_formatKey__WEBPACK_IMPORTED_MODULE_0__["default"].apply(void 0, [$t, this.objName].concat(args));
    },
    getFormatValue: function getFormatValue() {
      var _this4 = this;

      var $t = function $t(key) {
        return _this4.$t.call(_this4, key);
      };

      var $te = function $te(key) {
        return _this4.$te.call(_this4, key);
      };

      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      return _js_modules_formatValue__WEBPACK_IMPORTED_MODULE_1__["default"].apply(void 0, [$t, $te, null].concat(args));
    },
    isSelected: function isSelected(type, keyIndex, value) {
      var key = this.input.keys[keyIndex];
      var current = this.storage.plan[key] || 0;
      var min = this.storage.actually[key];

      if (min > current) {
        current = this.changeLvl('plan', key, min);
      }

      if (type == 'plan') {
        return value == current;
      }

      return this.storage[type][key] == value;
    },
    isDisabled: function isDisabled(type, keyIndex, value) {
      var key = this.input.keys[keyIndex];
      if (type != 'plan') return;
      if (!this.storage.actually) return;
      return value < this.storage.actually[key];
    },
    reset: function reset(event) {
      var _this5 = this;

      if (event.target.name == 'all') {
        var msg = confirm('Reset all? Ar u serious ?');

        if (msg) {
          this.storage = {
            actually: {},
            plan: {}
          };
        } else {
          return;
        }
      } else {
        if (this.storage.plan) {
          Object.keys(this.storage.plan).forEach(function (key) {
            _this5.storage.plan[key] = _this5.storage.actually[key];
          });
        } else {
          this.storage.plan = {};
        }
      }

      this.updateOutput(); // location.reload();
    },
    changeLvl: function changeLvl(type, key, value) {
      value = parseInt(value);
      this.$set(this.storage[type], key, parseInt(value));
      this.updateOutput();
      return value;
    },
    updateStorage: function updateStorage() {
      localStorage.setItem(localStorageKey, JSON.stringify(this.storage));
    },
    updateOutput: function updateOutput() {
      var _this6 = this;

      var result = this.output.calculated;
      var resultTotal = this.output.total;
      var items = this.input.keys;
      var planets = this.data.planets;
      var levels = this.data.levels;
      var tradingStations = this.data.tradingStations;
      this.createCells(); // вайпнуть значения

      this.updateStorage(); // синхронизировать хранилище

      Object.keys(this.storage).forEach(function (key) {
        if (!Object.keys(_this6.storage[key]).length) return;
        updateCol(key, _this6.storage[key]);
      });
      Object.keys(result).forEach(function (key) {
        // вычислить прирост плана
        result[key].plan = result[key].plan - result[key].actually;
      });
      updateCol('result', this.storage.plan);
      calculateTotal(this.storage);

      function updateCol(mode, obj) {
        Object.keys(obj).forEach(function (item) {
          var itemLvl = obj[item] - 1;
          var itemIndex = items.indexOf(item);
          if (!obj[item]) return;
          Object.keys(result).forEach(function (key, index) {
            var num1;
            var num2;

            if (mode == 'result') {
              // обновить результат
              num1 = result[key].plan;
              num2 = result[key].actually;
            } else {
              num1 = result[key][mode] || 0;

              if (keysModifiers[index]) {
                num2 = levels[key][itemLvl] * planets[keysModifiers[index]][itemIndex] / 100;

                if (item.includes('TradingStation')) {
                  num2 = 0;

                  if (key in keysAliasesTS) {
                    num2 = tradingStations[keysAliasesTS[key]][itemLvl];
                  }
                }
              } else {
                num2 = levels[key][itemLvl];
              }
            }

            result[key][mode] = num1 + num2;
          });
        });
      }

      function calculateTotal(obj) {
        Object.keys(obj.plan).forEach(function (item) {
          if (obj.plan[item] == 0) return;
          Object.keys(resultTotal).forEach(function (key) {
            var num1 = 0;
            var num2 = 0;
            var PlanIndexLvl = obj.plan[item] - 1;
            var ActuallyIndexLvl = (obj.actually[item] || 0) - 1;
            num1 = resultTotal[key] == undefined ? 0 : resultTotal[key];

            for (var level = ActuallyIndexLvl; PlanIndexLvl > level; level++) {
              var data = levels[key][level + 1] || 0;

              if (item.includes('TradingStation') && key in keysAliasesTS) {
                data = tradingStations[keysAliasesTS[key]][level + 1] || 0;
              }

              num2 = num2 + data;
            }

            resultTotal[key] = num1 + num2;
          });
        });
      }
    },
    outputClassesTable: function outputClassesTable(type, key) {
      if (type == 'plan') {
        return {
          'plan-plus': this.output.calculated[key].plan,
          'hide': this.output.calculated[key].plan == 0
        };
      }

      if (type == 'result') {
        var isGrowth = this.output.calculated[key].actually < this.output.calculated[key].result;
        var isHide = !this.output.total[Object.keys(this.output.total)[0]];
        return {
          'result-growth': isGrowth,
          'result-not-growth': !isGrowth,
          'hide': isHide
        };
      }
    }
  }
});

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/vue-loader/lib/index.js?!./frontend/src/components/ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css&":
/*!**************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/vue-loader/lib??vue-loader-options!./frontend/src/components/ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css& ***!
  \**************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);
// Imports

var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(true);
// Module
___CSS_LOADER_EXPORT___.push([module.i, "\n.planetsCalc[data-v-0c7c513e] {\n  border: 1px solid #424547;\n  border-spacing: 0;\n  color: #aab2b6;\n\n  width: 90%;\n  max-width: 450px;\n  margin: 15px auto;\n}\n.planetsCalc[data-v-0c7c513e] td {\n  padding: 8px 10px 8px;\n  line-height: 16px;\n  text-align: center;\n  font-size: 75%;\n  border: none;\n}\n.planetsCalc td[data-v-0c7c513e]:first-child {\n  text-align: left;\n}\n.planetsCalc tr.total[data-v-0c7c513e] {\n  background-color: rgba(9, 12, 12, 0.99);\n  font-weight: bold;\n}\n.hide[data-v-0c7c513e] {\n  visibility: collapse;\n}\n.plan-plus[data-v-0c7c513e] {\n  color: #fff19f;\n  white-space: nowrap;\n}\n.plan-plus[data-v-0c7c513e]:before {\n  content: \"+\";\n}\n.result-growth[data-v-0c7c513e] {\n  color: #1e7e34;\n}\n.result-not-growth[data-v-0c7c513e]{\n  opacity: 0.5;\n}\n.resetButtons[data-v-0c7c513e] {\n  display: flex;\n  justify-content: right;\n  padding-right: 3%;\n}\n.resetButtons button[data-v-0c7c513e] {\n  color: #fff;\n  cursor: pointer;\n  background-color: Transparent;\n  position: relative;\n  border: 1px solid #f7ca18;\n  transition: all 0.4s cubic-bezier(0.42, 0, 0.58, 1);\n  padding: 10px 10px;\n  margin-left: 5px;\n}\n.resetButtons button[data-v-0c7c513e]:hover {\n  color: #000;\n  background-color: transparent;\n}\n.resetButtons button[data-v-0c7c513e]:hover:before {\n  left: 0;\n  right: auto;\n  width: 100%;\n}\n.resetButtons button[data-v-0c7c513e]:before {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100%;\n  width: 0;\n  z-index: -1;\n  content: \"\";\n  background: #f7ca18;\n  transition: all 0.4s cubic-bezier(0.42, 0, 0.58, 1);\n}\n.resetButtonAll[data-v-0c7c513e] {\n  border: 1px solid #c90000 !important;\n}\n.resetButtonAll[data-v-0c7c513e]:before {\n  background: #c90000 !important;\n}\n", "",{"version":3,"sources":["frontend/src/components/ThePlanetsCalc.vue"],"names":[],"mappings":";AAkVA;EACA,yBAAA;EACA,iBAAA;EACA,cAAA;;EAEA,UAAA;EACA,gBAAA;EACA,iBAAA;AACA;AACA;EACA,qBAAA;EACA,iBAAA;EACA,kBAAA;EACA,cAAA;EACA,YAAA;AACA;AACA;EACA,gBAAA;AACA;AACA;EACA,uCAAA;EACA,iBAAA;AACA;AAEA;EACA,oBAAA;AACA;AACA;EACA,cAAA;EACA,mBAAA;AACA;AACA;EACA,YAAA;AACA;AACA;EACA,cAAA;AACA;AACA;EACA,YAAA;AACA;AAEA;EACA,aAAA;EACA,sBAAA;EACA,iBAAA;AACA;AACA;EACA,WAAA;EACA,eAAA;EACA,6BAAA;EACA,kBAAA;EACA,yBAAA;EACA,mDAAA;EACA,kBAAA;EACA,gBAAA;AACA;AACA;EACA,WAAA;EACA,6BAAA;AACA;AACA;EACA,OAAA;EACA,WAAA;EACA,WAAA;AACA;AACA;EACA,kBAAA;EACA,MAAA;EACA,QAAA;EACA,YAAA;EACA,QAAA;EACA,WAAA;EACA,WAAA;EACA,mBAAA;EACA,mDAAA;AACA;AACA;EACA,oCAAA;AACA;AACA;EACA,8BAAA;AACA","file":"ThePlanetsCalc.vue","sourcesContent":["<template>\n  <div>\n    <table class=\"planetsCalc\">\n      <tr v-for=\"(value, key) of output.calculated\" :key=\"key\">\n        <td>{{ getFormatKey(key) }}</td>\n        <td v-for=\"(item, itemKey) of value\" :key=\"key + itemKey\"\n            :class=\"outputClassesTable(itemKey, key)\"\n        >\n          {{ item.toLocaleString() }}\n        </td>\n      </tr>\n      <tr class=\"total\" v-for=\"(value, key) of output.total\" :key=\"key\">\n        <td>{{ $t(key) }}</td>\n        <td colspan=\"3\">\n          {{ getFormatValue(key, value) }}\n        </td>\n      </tr>\n    </table>\n    <div class=\"resetButtons\">\n      <button @click=\"reset\" name=\"plan\">\n        {{ $t(\"resetPlan\") }}\n      </button>\n      <button class=\"resetButtonAll\" @click=\"reset\" name=\"all\">\n        {{ $t(\"resetAll\") }}\n      </button>\n    </div>\n    <v-table\n      v-if=\"allDataLoaded\"\n      obj-name=\"planetsCalc\"\n      :head=\"input.static.head\"\n      :body=\"input.static.body\"\n      :max-level=\"input.static.maxLevel\"\n      :lvl-col-key=\"'№'\"\n      :merge-cells=\"false\"\n    >\n      <template #head>\n        <th>{{ $t(\"lvl\") }}</th>\n        <th>{{ $t(\"plan\") }}</th>\n      </template>\n\n      <template #body=\"{ level }\">\n        <td v-for=\"type of ['actually', 'plan']\" :key=\"type\">\n          <select @change=\"changeLvl(type, input.keys[level], $event.target.value)\">\n            <option\n              v-for=\"(i, index) of (input.maxUpgradeLevel[level] + 1)\"\n              :key=\"type + i\"\n              :selected=\"isSelected(type, level, index)\"\n              :disabled=\"isDisabled(type, level, index)\"\n            >\n              {{ index }}\n            </option>\n          </select>\n        </td>\n      </template>\n    </v-table>\n  </div>\n</template>\n\n<script>\nimport formatKey from '../js/modules/formatKey';\nimport formatValue from '../js/modules/formatValue';\nimport VTable from './DisplayObjectTable.vue';\n\nconst localStorageKey = 'planetsCalc';\nconst keys = [\n  'CreditStorage',\n  'FuelStorage',\n  'CreditsPerHour',\n  'FuelPerHour',\n  'ShipmentsCRValuePerDay',\n];\nconst keysModifiers = [\n  'CreditStorageModifier',\n  'FuelStorageModifier',\n  'CreditIncomeModifier',\n  'FuelIncomeModifier',\n  'CreditShipmentModifier',\n];\nconst keysTotal = ['Cost', 'TimeToUpgrade'];\nconst rows = ['actually', 'plan', 'result'];\nconst keysAliasesTS = {\n  ShipmentsCRValuePerDay: 'TotalShipmentCRPerDay',\n  Cost: 'Cost',\n  TimeToUpgrade: 'ConstructionTime',\n};\n\nexport default {\n  name: 'ThePlanetsCalc',\n  components: {VTable},\n  data() {\n    return {\n      input: {\n        static: {\n          head: [],\n          body: [],\n          maxLevel: 0,\n        },\n        keys: [],\n        maxUpgradeLevel: [],\n      },\n      output: {\n        calculated: {},\n        total: {},\n      },\n      data: {\n        planets: {},\n        levels: {},\n        tradingStations: {},\n      },\n      storage: {actually: {}, plan: {}},\n      allDataLoaded: false,\n    };\n  },\n  mounted() {\n    if (localStorage.getItem(localStorageKey)) {\n      try {\n        this.storage = JSON.parse(localStorage.getItem(localStorageKey));\n      } catch (e) {\n        localStorage.removeItem(localStorageKey);\n      }\n    }\n  },\n  created() {\n    this.loadData();\n  },\n  methods: {\n    loadData() {\n      Promise.all([\n        import('../../../data/planets'),\n        import('../../../data/planet_levels'),\n        import('../../../data/spacebuildings'),\n      ])\n          .then(([planets, planetLevels, spacebuildings]) => {\n            this.data.planets = planets.data.yellowstarTable;\n            this.data.levels = planetLevels.data;\n            this.data.tradingStations = spacebuildings.data.TradingStation;\n          })\n          .then(this.generateInputTable)\n          .then(this.updateOutput)\n          .then(() => this.allDataLoaded = true)\n          .catch(console.error);\n    },\n    createCells() {\n      keys.forEach((key) => {\n        const result = {};\n        rows.forEach((e) => (result[e] = 0));\n\n        this.$set(this.output.calculated, key, result);\n      });\n      keysTotal.forEach((key) => {\n        this.$set(this.output.total, key, 0);\n      });\n    },\n    generateInputTable() {\n      const obj = {\n        Name: this.data.planets.Name,\n        MaxUpgradeLevel: this.data.planets.MaxUpgradeLevel,\n\n        TID: this.data.planets.TID,\n        maxLevel: this.data.planets.maxLevel,\n      };\n\n      // добавить торги\n      for (let i = 0; this.data.tradingStations.MaxOnOwnSolarSystem > i; i++) {\n        obj.Name.push(this.data.tradingStations.Name + '_' + i);\n        obj.MaxUpgradeLevel.push(this.data.tradingStations.maxLevel);\n\n        obj.TID.push(this.data.tradingStations.TID);\n        obj.maxLevel++;\n      }\n\n      this.input.keys = obj.Name;\n      this.input.maxUpgradeLevel = obj.MaxUpgradeLevel;\n\n      this.input.static.head.push('TID');\n      this.input.static.body.push(obj.TID);\n      this.input.static.maxLevel = obj.maxLevel;\n    },\n    getFormatKey(...args) {\n      const $t = (key) => this.$t.call(this, key);\n      return formatKey($t, this.objName, ...args);\n    },\n    getFormatValue(...args) {\n      const $t = (key) => this.$t.call(this, key);\n      const $te = (key) => this.$te.call(this, key);\n      return formatValue($t, $te, null, ...args);\n    },\n    isSelected(type, keyIndex, value) {\n      const key = this.input.keys[keyIndex];\n      let current = this.storage.plan[key] || 0;\n      const min = this.storage.actually[key];\n\n      if (min > current) {\n        current = this.changeLvl('plan', key, min);\n      }\n      if (type == 'plan') {\n        return (value == current);\n      }\n      return (this.storage[type][key] == value);\n    },\n    isDisabled(type, keyIndex, value) {\n      const key = this.input.keys[keyIndex];\n\n      if (type != 'plan') return;\n      if (!this.storage.actually) return;\n      return (value < this.storage.actually[key]);\n    },\n    reset(event) {\n      if (event.target.name == 'all') {\n        const msg = confirm('Reset all? Ar u serious ?');\n        if (msg) {\n          this.storage = {actually: {}, plan: {}};\n        } else {\n          return;\n        }\n      } else {\n        if (this.storage.plan) {\n          Object.keys(this.storage.plan).forEach((key) => {\n            this.storage.plan[key] = this.storage.actually[key];\n          });\n        } else {\n          this.storage.plan = {};\n        }\n      }\n      this.updateOutput();\n      // location.reload();\n    },\n    changeLvl(type, key, value) {\n      value = parseInt(value);\n\n      this.$set(this.storage[type], key, parseInt(value));\n      this.updateOutput();\n      return value;\n    },\n    updateStorage() {\n      localStorage.setItem(localStorageKey, JSON.stringify(this.storage));\n    },\n    updateOutput() {\n      const result = this.output.calculated;\n      const resultTotal = this.output.total;\n      const items = this.input.keys;\n\n      const planets = this.data.planets;\n      const levels = this.data.levels;\n      const tradingStations = this.data.tradingStations;\n\n      this.createCells(); // вайпнуть значения\n      this.updateStorage(); // синхронизировать хранилище\n\n      Object.keys(this.storage).forEach((key) => {\n        if (!Object.keys(this.storage[key]).length) return;\n\n        updateCol(key, this.storage[key]);\n      });\n\n      Object.keys(result).forEach((key) => { // вычислить прирост плана\n        result[key].plan = (result[key].plan - result[key].actually);\n      });\n      updateCol('result', this.storage.plan);\n      calculateTotal(this.storage);\n\n      function updateCol(mode, obj) {\n        Object.keys(obj).forEach((item) => {\n          const itemLvl = obj[item] - 1;\n          const itemIndex = items.indexOf(item);\n\n          if (!obj[item]) return;\n          Object.keys(result).forEach((key, index) => {\n            let num1;\n            let num2;\n\n            if (mode == 'result') { // обновить результат\n              num1 = result[key].plan;\n              num2 = result[key].actually;\n            } else {\n              num1 = result[key][mode] || 0;\n              if (keysModifiers[index]) {\n                num2 = (levels[key][itemLvl] * planets[keysModifiers[index]][itemIndex]) / 100;\n\n                if (item.includes('TradingStation')) {\n                  num2 = 0;\n                  if (key in keysAliasesTS) {\n                    num2 = tradingStations[keysAliasesTS[key]][itemLvl];\n                  }\n                }\n              } else {\n                num2 = levels[key][itemLvl];\n              }\n            }\n            result[key][mode] = num1 + num2;\n          });\n        });\n      }\n      function calculateTotal(obj) {\n        Object.keys(obj.plan).forEach((item) => {\n          if (obj.plan[item] == 0) return;\n          Object.keys(resultTotal).forEach((key) => {\n            let num1 = 0;\n            let num2 = 0;\n            const PlanIndexLvl = obj.plan[item] - 1;\n            const ActuallyIndexLvl = (obj.actually[item] || 0) - 1;\n\n            num1 = (resultTotal[key] == undefined) ? 0 : resultTotal[key];\n            for (let level = ActuallyIndexLvl; PlanIndexLvl > level; level++) {\n              let data = levels[key][level + 1] || 0;\n\n              if (item.includes('TradingStation') && key in keysAliasesTS) {\n                data = tradingStations[keysAliasesTS[key]][level + 1] || 0;\n              }\n              num2 = num2 + data;\n            }\n            resultTotal[key] = num1 + num2;\n          });\n        });\n      }\n    },\n    outputClassesTable(type, key) {\n      if (type == 'plan') {\n        return {\n          'plan-plus': this.output.calculated[key].plan,\n          'hide': this.output.calculated[key].plan == 0,\n        };\n      }\n      if (type == 'result') {\n        const isGrowth = (this.output.calculated[key].actually < this.output.calculated[key].result);\n        const isHide = !this.output.total[Object.keys(this.output.total)[0]];\n        return {\n          'result-growth': isGrowth,\n          'result-not-growth': !isGrowth,\n          'hide': isHide,\n        };\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.planetsCalc {\n  border: 1px solid #424547;\n  border-spacing: 0;\n  color: #aab2b6;\n\n  width: 90%;\n  max-width: 450px;\n  margin: 15px auto;\n}\n.planetsCalc >>> td {\n  padding: 8px 10px 8px;\n  line-height: 16px;\n  text-align: center;\n  font-size: 75%;\n  border: none;\n}\n.planetsCalc td:first-child {\n  text-align: left;\n}\n.planetsCalc tr.total {\n  background-color: rgba(9, 12, 12, 0.99);\n  font-weight: bold;\n}\n\n.hide {\n  visibility: collapse;\n}\n.plan-plus {\n  color: #fff19f;\n  white-space: nowrap;\n}\n.plan-plus:before {\n  content: \"+\";\n}\n.result-growth {\n  color: #1e7e34;\n}\n.result-not-growth{\n  opacity: 0.5;\n}\n\n.resetButtons {\n  display: flex;\n  justify-content: right;\n  padding-right: 3%;\n}\n.resetButtons button {\n  color: #fff;\n  cursor: pointer;\n  background-color: Transparent;\n  position: relative;\n  border: 1px solid #f7ca18;\n  transition: all 0.4s cubic-bezier(0.42, 0, 0.58, 1);\n  padding: 10px 10px;\n  margin-left: 5px;\n}\n.resetButtons button:hover {\n  color: #000;\n  background-color: transparent;\n}\n.resetButtons button:hover:before {\n  left: 0;\n  right: auto;\n  width: 100%;\n}\n.resetButtons button:before {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100%;\n  width: 0;\n  z-index: -1;\n  content: \"\";\n  background: #f7ca18;\n  transition: all 0.4s cubic-bezier(0.42, 0, 0.58, 1);\n}\n.resetButtonAll {\n  border: 1px solid #c90000 !important;\n}\n.resetButtonAll:before {\n  background: #c90000 !important;\n}\n</style>\n"]}]);
// Exports
/* harmony default export */ __webpack_exports__["default"] = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/vue-loader/lib/index.js?!./frontend/src/components/ThePlanetsCalc.vue?vue&type=template&id=0c7c513e&scoped=true&":
/*!*****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./frontend/src/components/ThePlanetsCalc.vue?vue&type=template&id=0c7c513e&scoped=true& ***!
  \*****************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c(
    "div",
    [
      _c(
        "table",
        { staticClass: "planetsCalc" },
        [
          _vm._l(_vm.output.calculated, function(value, key) {
            return _c(
              "tr",
              { key: key },
              [
                _c("td", [_vm._v(_vm._s(_vm.getFormatKey(key)))]),
                _vm._v(" "),
                _vm._l(value, function(item, itemKey) {
                  return _c(
                    "td",
                    {
                      key: key + itemKey,
                      class: _vm.outputClassesTable(itemKey, key)
                    },
                    [
                      _vm._v(
                        "\n        " +
                          _vm._s(item.toLocaleString()) +
                          "\n      "
                      )
                    ]
                  )
                })
              ],
              2
            )
          }),
          _vm._v(" "),
          _vm._l(_vm.output.total, function(value, key) {
            return _c("tr", { key: key, staticClass: "total" }, [
              _c("td", [_vm._v(_vm._s(_vm.$t(key)))]),
              _vm._v(" "),
              _c("td", { attrs: { colspan: "3" } }, [
                _vm._v(
                  "\n        " +
                    _vm._s(_vm.getFormatValue(key, value)) +
                    "\n      "
                )
              ])
            ])
          })
        ],
        2
      ),
      _vm._v(" "),
      _c("div", { staticClass: "resetButtons" }, [
        _c("button", { attrs: { name: "plan" }, on: { click: _vm.reset } }, [
          _vm._v("\n      " + _vm._s(_vm.$t("resetPlan")) + "\n    ")
        ]),
        _vm._v(" "),
        _c(
          "button",
          {
            staticClass: "resetButtonAll",
            attrs: { name: "all" },
            on: { click: _vm.reset }
          },
          [_vm._v("\n      " + _vm._s(_vm.$t("resetAll")) + "\n    ")]
        )
      ]),
      _vm._v(" "),
      _vm.allDataLoaded
        ? _c("v-table", {
            attrs: {
              "obj-name": "planetsCalc",
              head: _vm.input.static.head,
              body: _vm.input.static.body,
              "max-level": _vm.input.static.maxLevel,
              "lvl-col-key": "№",
              "merge-cells": false
            },
            scopedSlots: _vm._u(
              [
                {
                  key: "head",
                  fn: function() {
                    return [
                      _c("th", [_vm._v(_vm._s(_vm.$t("lvl")))]),
                      _vm._v(" "),
                      _c("th", [_vm._v(_vm._s(_vm.$t("plan")))])
                    ]
                  },
                  proxy: true
                },
                {
                  key: "body",
                  fn: function(ref) {
                    var level = ref.level
                    return _vm._l(["actually", "plan"], function(type) {
                      return _c("td", { key: type }, [
                        _c(
                          "select",
                          {
                            on: {
                              change: function($event) {
                                return _vm.changeLvl(
                                  type,
                                  _vm.input.keys[level],
                                  $event.target.value
                                )
                              }
                            }
                          },
                          _vm._l(_vm.input.maxUpgradeLevel[level] + 1, function(
                            i,
                            index
                          ) {
                            return _c(
                              "option",
                              {
                                key: type + i,
                                attrs: {
                                  disabled: _vm.isDisabled(type, level, index)
                                },
                                domProps: {
                                  selected: _vm.isSelected(type, level, index)
                                }
                              },
                              [
                                _vm._v(
                                  "\n            " +
                                    _vm._s(index) +
                                    "\n          "
                                )
                              ]
                            )
                          }),
                          0
                        )
                      ])
                    })
                  }
                }
              ],
              null,
              false,
              3585118682
            )
          })
        : _vm._e()
    ],
    1
  )
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ "./node_modules/vue-style-loader/index.js!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/vue-loader/lib/index.js?!./frontend/src/components/ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css&":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-style-loader!./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/vue-loader/lib??vue-loader-options!./frontend/src/components/ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib??vue-loader-options!./ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css& */ "./node_modules/css-loader/dist/cjs.js!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/vue-loader/lib/index.js?!./frontend/src/components/ThePlanetsCalc.vue?vue&type=style&index=0&id=0c7c513e&scoped=true&lang=css&");
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = __webpack_require__(/*! ../../../node_modules/vue-style-loader/lib/addStylesClient.js */ "./node_modules/vue-style-loader/lib/addStylesClient.js").default
var update = add("49715647", content, false, {});
// Hot Module Replacement
if(false) {}

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9UaGVQbGFuZXRzQ2FsYy52dWUiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvVGhlUGxhbmV0c0NhbGMudnVlP2RlNTEiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvVGhlUGxhbmV0c0NhbGMudnVlPzRlZTIiLCJ3ZWJwYWNrOi8vLy4vZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvVGhlUGxhbmV0c0NhbGMudnVlPzE1OWUiLCJ3ZWJwYWNrOi8vL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL1RoZVBsYW5ldHNDYWxjLnZ1ZSIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9UaGVQbGFuZXRzQ2FsYy52dWU/ZGMyZiIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9UaGVQbGFuZXRzQ2FsYy52dWU/MDhmZSIsIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9UaGVQbGFuZXRzQ2FsYy52dWU/NWY5OSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUF5RztBQUN2QztBQUNMO0FBQ3FDOzs7QUFHbEc7QUFDNkY7QUFDN0YsZ0JBQWdCLDJHQUFVO0FBQzFCLEVBQUUsb0ZBQU07QUFDUixFQUFFLHFHQUFNO0FBQ1IsRUFBRSw4R0FBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLElBQUksS0FBVSxFQUFFLFlBaUJmO0FBQ0Q7QUFDZSxnRjs7Ozs7Ozs7Ozs7O0FDdkNmO0FBQUE7QUFBQSx3Q0FBb0wsQ0FBZ0Isa1BBQUcsRUFBQyxDOzs7Ozs7Ozs7Ozs7QUNBeE07QUFBQTtBQUFBO0FBQUE7QUFBaVUsQ0FBZ0IsNFdBQUcsRUFBQyxDOzs7Ozs7Ozs7Ozs7QUNBclY7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMyREE7QUFDQTtBQUNBO0FBRUE7QUFDQSxZQUNBLGVBREEsRUFFQSxhQUZBLEVBR0EsZ0JBSEEsRUFJQSxhQUpBLEVBS0Esd0JBTEE7QUFPQSxxQkFDQSx1QkFEQSxFQUVBLHFCQUZBLEVBR0Esc0JBSEEsRUFJQSxvQkFKQSxFQUtBLHdCQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0EsaURBREE7QUFFQSxjQUZBO0FBR0E7QUFIQTtBQU1BO0FBQ0Esd0JBREE7QUFFQTtBQUFBO0FBQUEsR0FGQTtBQUdBLE1BSEEsa0JBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFEQTtBQUVBLGtCQUZBO0FBR0E7QUFIQSxTQURBO0FBTUEsZ0JBTkE7QUFPQTtBQVBBLE9BREE7QUFVQTtBQUNBLHNCQURBO0FBRUE7QUFGQSxPQVZBO0FBY0E7QUFDQSxtQkFEQTtBQUVBLGtCQUZBO0FBR0E7QUFIQSxPQWRBO0FBbUJBO0FBQUE7QUFBQTtBQUFBLE9BbkJBO0FBb0JBO0FBcEJBO0FBc0JBLEdBMUJBO0FBMkJBLFNBM0JBLHFCQTJCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BRkEsQ0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBbkNBO0FBb0NBLFNBcENBLHFCQW9DQTtBQUNBO0FBQ0EsR0F0Q0E7QUF1Q0E7QUFDQSxZQURBLHNCQUNBO0FBQUE7O0FBQ0EsbUJBQ0Esb0lBREEsRUFFQSxnSkFGQSxFQUdBLGtKQUhBLEdBS0EsSUFMQSxDQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FUQSxFQVVBLElBVkEsQ0FVQSx1QkFWQSxFQVdBLElBWEEsQ0FXQSxpQkFYQSxFQVlBLElBWkEsQ0FZQTtBQUFBO0FBQUEsT0FaQSxXQWFBLGFBYkE7QUFjQSxLQWhCQTtBQWlCQSxlQWpCQSx5QkFpQkE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOztBQUVBO0FBQ0EsT0FMQTtBQU1BO0FBQ0E7QUFDQSxPQUZBO0FBR0EsS0EzQkE7QUE0QkEsc0JBNUJBLGdDQTRCQTtBQUNBO0FBQ0Esb0NBREE7QUFFQSwwREFGQTtBQUlBLGtDQUpBO0FBS0E7QUFMQSxRQURBLENBU0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQXBEQTtBQXFEQSxnQkFyREEsMEJBcURBO0FBQUE7O0FBQ0E7QUFBQTtBQUFBOztBQURBO0FBQUE7QUFBQTs7QUFFQTtBQUNBLEtBeERBO0FBeURBLGtCQXpEQSw0QkF5REE7QUFBQTs7QUFDQTtBQUFBO0FBQUE7O0FBQ0E7QUFBQTtBQUFBOztBQUZBO0FBQUE7QUFBQTs7QUFHQTtBQUNBLEtBN0RBO0FBOERBLGNBOURBLHNCQThEQSxJQTlEQSxFQThEQSxRQTlEQSxFQThEQSxLQTlEQSxFQThEQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0EsS0ExRUE7QUEyRUEsY0EzRUEsc0JBMkVBLElBM0VBLEVBMkVBLFFBM0VBLEVBMkVBLEtBM0VBLEVBMkVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQWpGQTtBQWtGQSxTQWxGQSxpQkFrRkEsS0FsRkEsRUFrRkE7QUFBQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQSxTQUZBLE1BRUE7QUFDQTtBQUNBO0FBQ0EsT0FQQSxNQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FGQTtBQUdBLFNBSkEsTUFJQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQSwwQkFqQkEsQ0FrQkE7QUFDQSxLQXJHQTtBQXNHQSxhQXRHQSxxQkFzR0EsSUF0R0EsRUFzR0EsR0F0R0EsRUFzR0EsS0F0R0EsRUFzR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBNUdBO0FBNkdBLGlCQTdHQSwyQkE2R0E7QUFDQTtBQUNBLEtBL0dBO0FBZ0hBLGdCQWhIQSwwQkFnSEE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQSx5QkFUQSxDQVNBOztBQUNBLDJCQVZBLENBVUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0EsT0FKQTtBQU1BO0FBQUE7QUFDQTtBQUNBLE9BRkE7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQSxhQUhBLE1BR0E7QUFDQTs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQVRBLE1BU0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQSxXQXZCQTtBQXdCQSxTQTdCQTtBQThCQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBLFdBaEJBO0FBaUJBLFNBbkJBO0FBb0JBO0FBQ0EsS0E5TEE7QUErTEEsc0JBL0xBLDhCQStMQSxJQS9MQSxFQStMQSxHQS9MQSxFQStMQTtBQUNBO0FBQ0E7QUFDQSx1REFEQTtBQUVBO0FBRkE7QUFJQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQURBO0FBRUEsd0NBRkE7QUFHQTtBQUhBO0FBS0E7QUFDQTtBQS9NQTtBQXZDQSxHOzs7Ozs7Ozs7Ozs7QUN0RkE7QUFBQTtBQUFBO0FBQUE7QUFDK0Y7QUFDL0YsOEJBQThCLG1GQUEyQjtBQUN6RDtBQUNBLDhCQUE4QixRQUFTLG9DQUFvQyw4QkFBOEIsc0JBQXNCLG1CQUFtQixpQkFBaUIscUJBQXFCLHNCQUFzQixHQUFHLG9DQUFvQywwQkFBMEIsc0JBQXNCLHVCQUF1QixtQkFBbUIsaUJBQWlCLEdBQUcsZ0RBQWdELHFCQUFxQixHQUFHLDBDQUEwQyw0Q0FBNEMsc0JBQXNCLEdBQUcsMEJBQTBCLHlCQUF5QixHQUFHLCtCQUErQixtQkFBbUIsd0JBQXdCLEdBQUcsc0NBQXNDLG1CQUFtQixHQUFHLG1DQUFtQyxtQkFBbUIsR0FBRyxzQ0FBc0MsaUJBQWlCLEdBQUcsa0NBQWtDLGtCQUFrQiwyQkFBMkIsc0JBQXNCLEdBQUcseUNBQXlDLGdCQUFnQixvQkFBb0Isa0NBQWtDLHVCQUF1Qiw4QkFBOEIsd0RBQXdELHVCQUF1QixxQkFBcUIsR0FBRywrQ0FBK0MsZ0JBQWdCLGtDQUFrQyxHQUFHLHNEQUFzRCxZQUFZLGdCQUFnQixnQkFBZ0IsR0FBRyxnREFBZ0QsdUJBQXVCLFdBQVcsYUFBYSxpQkFBaUIsYUFBYSxnQkFBZ0Isa0JBQWtCLHdCQUF3Qix3REFBd0QsR0FBRyxvQ0FBb0MseUNBQXlDLEdBQUcsMkNBQTJDLG1DQUFtQyxHQUFHLFNBQVMsNkZBQTZGLE1BQU0sV0FBVyxXQUFXLFdBQVcsVUFBVSxXQUFXLFdBQVcsS0FBSyxLQUFLLFdBQVcsV0FBVyxXQUFXLFVBQVUsVUFBVSxLQUFLLEtBQUssV0FBVyxLQUFLLEtBQUssV0FBVyxXQUFXLEtBQUssS0FBSyxXQUFXLEtBQUssS0FBSyxVQUFVLFdBQVcsS0FBSyxLQUFLLFVBQVUsS0FBSyxLQUFLLFVBQVUsS0FBSyxLQUFLLFVBQVUsS0FBSyxLQUFLLFVBQVUsV0FBVyxXQUFXLEtBQUssS0FBSyxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLFdBQVcsS0FBSyxLQUFLLFVBQVUsV0FBVyxLQUFLLEtBQUssVUFBVSxVQUFVLFVBQVUsS0FBSyxLQUFLLFdBQVcsVUFBVSxVQUFVLFVBQVUsVUFBVSxVQUFVLFVBQVUsV0FBVyxXQUFXLEtBQUssS0FBSyxXQUFXLEtBQUssS0FBSyxXQUFXLGdNQUFnTSxxQkFBcUIsOEpBQThKLHlCQUF5Qiw0SEFBNEgsV0FBVywrQ0FBK0MsOEJBQThCLHVJQUF1SSxxQkFBcUIsb0dBQW9HLG9CQUFvQixvVUFBb1UsZUFBZSxxQkFBcUIsZ0JBQWdCLHFEQUFxRCxRQUFRLHViQUF1YixTQUFTLG1MQUFtTCxzREFBc0QsZ0RBQWdELDBDQUEwQyw4SEFBOEgsb0tBQW9LLDhDQUE4Qyw4Q0FBOEMseUJBQXlCLCtHQUErRyxvQkFBb0IsNENBQTRDLE9BQU8sYUFBYSxjQUFjLGdCQUFnQixtQkFBbUIsNkVBQTZFLDJEQUEyRCxrQkFBa0Isd0JBQXdCLG9CQUFvQixVQUFVLGdCQUFnQixxQkFBcUIscUJBQXFCLDhCQUE4QixVQUFVLG1CQUFtQixZQUFZLFdBQVcsc0NBQXNDLEtBQUssZ0JBQWdCLGtEQUFrRCxhQUFhLDJFQUEyRSxTQUFTLFlBQVksbURBQW1ELFNBQVMsT0FBTyxLQUFLLGdCQUFnQixzQkFBc0IsS0FBSyxlQUFlLGtCQUFrQiwwT0FBME8sK0RBQStELG1EQUFtRCw2RUFBNkUsYUFBYSxtS0FBbUssT0FBTyxzQkFBc0IsK0JBQStCLDRCQUE0QiwrQ0FBK0MsMkRBQTJELFNBQVMsRUFBRSxvQ0FBb0MsK0NBQStDLFNBQVMsRUFBRSxPQUFPLDZCQUE2QixxQkFBcUIsb01BQW9NLGtEQUFrRCxtREFBbUQsT0FBTyxrRUFBa0UsdUVBQXVFLHdEQUF3RCx5QkFBeUIsU0FBUyxxQ0FBcUMseURBQXlELDZDQUE2Qyw2Q0FBNkMsa0RBQWtELE9BQU8sOEJBQThCLG9EQUFvRCxvREFBb0QsT0FBTyxnQ0FBZ0Msb0RBQW9ELHNEQUFzRCxtREFBbUQsT0FBTywwQ0FBMEMsOENBQThDLGtEQUFrRCwrQ0FBK0MsOEJBQThCLHFEQUFxRCxTQUFTLDZCQUE2QixvQ0FBb0MsU0FBUyxrREFBa0QsT0FBTywwQ0FBMEMsOENBQThDLHFDQUFxQywyQ0FBMkMsb0RBQW9ELE9BQU8scUJBQXFCLHlDQUF5QywyREFBMkQsb0JBQW9CLDRCQUE0QixZQUFZLFlBQVksV0FBVyxPQUFPLG1CQUFtQixXQUFXLFNBQVMsT0FBTyxrQ0FBa0MsNkRBQTZELGtFQUFrRSxhQUFhLEVBQUUsV0FBVyxPQUFPLG1DQUFtQyxXQUFXLFNBQVMsNEJBQTRCLDZCQUE2QixPQUFPLG9DQUFvQyxnQ0FBZ0MsOERBQThELDRCQUE0QixxQkFBcUIsT0FBTyx3QkFBd0IsNEVBQTRFLE9BQU8sdUJBQXVCLDhDQUE4Qyw4Q0FBOEMsc0NBQXNDLDRDQUE0Qyx3Q0FBd0MsMERBQTBELDZCQUE2QixrREFBa0Qsb0ZBQW9GLDZEQUE2RCw4Q0FBOEMsU0FBUyxFQUFFLGdEQUFnRCxrR0FBa0csU0FBUyxFQUFFLCtDQUErQyxxQ0FBcUMseUNBQXlDLDhDQUE4QywwQ0FBMEMsa0RBQWtELHFDQUFxQyx5REFBeUQsdUJBQXVCLHVCQUF1Qix1Q0FBdUMsOERBQThELDRDQUE0QyxlQUFlLE9BQU8sOENBQThDLDJDQUEyQyxpR0FBaUcsMERBQTBELDZCQUE2QiwrQ0FBK0MsMEVBQTBFLHFCQUFxQixtQkFBbUIsaUJBQWlCLE9BQU8sOENBQThDLGlCQUFpQixlQUFlLDhDQUE4QyxhQUFhLEVBQUUsV0FBVyxFQUFFLFNBQVMsc0NBQXNDLG1EQUFtRCw0Q0FBNEMsdURBQXVELDJCQUEyQiwyQkFBMkIsc0RBQXNELHFFQUFxRSw4RUFBOEUsZ0RBQWdELHNCQUFzQixXQUFXLHVEQUF1RCxnRkFBZ0YsNkVBQTZFLGlCQUFpQixtQ0FBbUMsZUFBZSw2Q0FBNkMsYUFBYSxFQUFFLFdBQVcsRUFBRSxTQUFTLE9BQU8sc0NBQXNDLDZCQUE2QixrQkFBa0IsZ0lBQWdJLFNBQVMsK0JBQStCLHVHQUF1RywrRUFBK0Usa0JBQWtCLHdIQUF3SCxTQUFTLE9BQU8sTUFBTSxLQUFLLDZDQUE2Qyw4QkFBOEIsc0JBQXNCLG1CQUFtQixpQkFBaUIscUJBQXFCLHNCQUFzQixHQUFHLHVCQUF1QiwwQkFBMEIsc0JBQXNCLHVCQUF1QixtQkFBbUIsaUJBQWlCLEdBQUcsK0JBQStCLHFCQUFxQixHQUFHLHlCQUF5Qiw0Q0FBNEMsc0JBQXNCLEdBQUcsV0FBVyx5QkFBeUIsR0FBRyxjQUFjLG1CQUFtQix3QkFBd0IsR0FBRyxxQkFBcUIsbUJBQW1CLEdBQUcsa0JBQWtCLG1CQUFtQixHQUFHLHFCQUFxQixpQkFBaUIsR0FBRyxtQkFBbUIsa0JBQWtCLDJCQUEyQixzQkFBc0IsR0FBRyx3QkFBd0IsZ0JBQWdCLG9CQUFvQixrQ0FBa0MsdUJBQXVCLDhCQUE4Qix3REFBd0QsdUJBQXVCLHFCQUFxQixHQUFHLDhCQUE4QixnQkFBZ0Isa0NBQWtDLEdBQUcscUNBQXFDLFlBQVksZ0JBQWdCLGdCQUFnQixHQUFHLCtCQUErQix1QkFBdUIsV0FBVyxhQUFhLGlCQUFpQixhQUFhLGdCQUFnQixrQkFBa0Isd0JBQXdCLHdEQUF3RCxHQUFHLG1CQUFtQix5Q0FBeUMsR0FBRywwQkFBMEIsbUNBQW1DLEdBQUcsZUFBZTtBQUN0dWM7QUFDZSxzRkFBdUIsRUFBQzs7Ozs7Ozs7Ozs7OztBQ052QztBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZCQUE2QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsV0FBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLDZCQUE2QixpQ0FBaUM7QUFDOUQ7QUFDQTtBQUNBLHdCQUF3QixTQUFTLGVBQWUsRUFBRTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4QkFBOEI7QUFDL0Msc0JBQXNCLFNBQVMsZUFBZSxPQUFPLG1CQUFtQixFQUFFO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGNBQWM7QUFDbEMsaUJBQWlCO0FBQ2pCLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFlBQVk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQzVKQTs7QUFFQTtBQUNBLGNBQWMsbUJBQU8sQ0FBQywwZUFBZ1E7QUFDdFIsNENBQTRDLFFBQVM7QUFDckQ7QUFDQTtBQUNBLFVBQVUsbUJBQU8sQ0FBQyw2SEFBZ0U7QUFDbEYsK0NBQStDO0FBQy9DO0FBQ0EsR0FBRyxLQUFVLEVBQUUsRSIsImZpbGUiOiI1LmNoYW5rLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSBmcm9tIFwiLi9UaGVQbGFuZXRzQ2FsYy52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9MGM3YzUxM2Umc2NvcGVkPXRydWUmXCJcbmltcG9ydCBzY3JpcHQgZnJvbSBcIi4vVGhlUGxhbmV0c0NhbGMudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiXG5leHBvcnQgKiBmcm9tIFwiLi9UaGVQbGFuZXRzQ2FsYy52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmXCJcbmltcG9ydCBzdHlsZTAgZnJvbSBcIi4vVGhlUGxhbmV0c0NhbGMudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9MGM3YzUxM2Umc2NvcGVkPXRydWUmbGFuZz1jc3MmXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBcIjBjN2M1MTNlXCIsXG4gIG51bGxcbiAgXG4pXG5cbi8qIGhvdCByZWxvYWQgKi9cbmlmIChtb2R1bGUuaG90KSB7XG4gIHZhciBhcGkgPSByZXF1aXJlKFwiL2hvbWUveGlub3MvcHJvamVjdHMvSGFkZXNTdGFyRGF0YS9ub2RlX21vZHVsZXMvdnVlLWhvdC1yZWxvYWQtYXBpL2Rpc3QvaW5kZXguanNcIilcbiAgYXBpLmluc3RhbGwocmVxdWlyZSgndnVlJykpXG4gIGlmIChhcGkuY29tcGF0aWJsZSkge1xuICAgIG1vZHVsZS5ob3QuYWNjZXB0KClcbiAgICBpZiAoIWFwaS5pc1JlY29yZGVkKCcwYzdjNTEzZScpKSB7XG4gICAgICBhcGkuY3JlYXRlUmVjb3JkKCcwYzdjNTEzZScsIGNvbXBvbmVudC5vcHRpb25zKVxuICAgIH0gZWxzZSB7XG4gICAgICBhcGkucmVsb2FkKCcwYzdjNTEzZScsIGNvbXBvbmVudC5vcHRpb25zKVxuICAgIH1cbiAgICBtb2R1bGUuaG90LmFjY2VwdChcIi4vVGhlUGxhbmV0c0NhbGMudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTBjN2M1MTNlJnNjb3BlZD10cnVlJlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBhcGkucmVyZW5kZXIoJzBjN2M1MTNlJywge1xuICAgICAgICByZW5kZXI6IHJlbmRlcixcbiAgICAgICAgc3RhdGljUmVuZGVyRm5zOiBzdGF0aWNSZW5kZXJGbnNcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuY29tcG9uZW50Lm9wdGlvbnMuX19maWxlID0gXCJmcm9udGVuZC9zcmMvY29tcG9uZW50cy9UaGVQbGFuZXRzQ2FsYy52dWVcIlxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vVGhlUGxhbmV0c0NhbGMudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vVGhlUGxhbmV0c0NhbGMudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiIiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9UaGVQbGFuZXRzQ2FsYy52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0wYzdjNTEzZSZzY29wZWQ9dHJ1ZSZsYW5nPWNzcyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9UaGVQbGFuZXRzQ2FsYy52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0wYzdjNTEzZSZzY29wZWQ9dHJ1ZSZsYW5nPWNzcyZcIiIsImV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9sb2FkZXJzL3RlbXBsYXRlTG9hZGVyLmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9UaGVQbGFuZXRzQ2FsYy52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9MGM3YzUxM2Umc2NvcGVkPXRydWUmXCIiLCI8dGVtcGxhdGU+XG4gIDxkaXY+XG4gICAgPHRhYmxlIGNsYXNzPVwicGxhbmV0c0NhbGNcIj5cbiAgICAgIDx0ciB2LWZvcj1cIih2YWx1ZSwga2V5KSBvZiBvdXRwdXQuY2FsY3VsYXRlZFwiIDprZXk9XCJrZXlcIj5cbiAgICAgICAgPHRkPnt7IGdldEZvcm1hdEtleShrZXkpIH19PC90ZD5cbiAgICAgICAgPHRkIHYtZm9yPVwiKGl0ZW0sIGl0ZW1LZXkpIG9mIHZhbHVlXCIgOmtleT1cImtleSArIGl0ZW1LZXlcIlxuICAgICAgICAgICAgOmNsYXNzPVwib3V0cHV0Q2xhc3Nlc1RhYmxlKGl0ZW1LZXksIGtleSlcIlxuICAgICAgICA+XG4gICAgICAgICAge3sgaXRlbS50b0xvY2FsZVN0cmluZygpIH19XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L3RyPlxuICAgICAgPHRyIGNsYXNzPVwidG90YWxcIiB2LWZvcj1cIih2YWx1ZSwga2V5KSBvZiBvdXRwdXQudG90YWxcIiA6a2V5PVwia2V5XCI+XG4gICAgICAgIDx0ZD57eyAkdChrZXkpIH19PC90ZD5cbiAgICAgICAgPHRkIGNvbHNwYW49XCIzXCI+XG4gICAgICAgICAge3sgZ2V0Rm9ybWF0VmFsdWUoa2V5LCB2YWx1ZSkgfX1cbiAgICAgICAgPC90ZD5cbiAgICAgIDwvdHI+XG4gICAgPC90YWJsZT5cbiAgICA8ZGl2IGNsYXNzPVwicmVzZXRCdXR0b25zXCI+XG4gICAgICA8YnV0dG9uIEBjbGljaz1cInJlc2V0XCIgbmFtZT1cInBsYW5cIj5cbiAgICAgICAge3sgJHQoXCJyZXNldFBsYW5cIikgfX1cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlc2V0QnV0dG9uQWxsXCIgQGNsaWNrPVwicmVzZXRcIiBuYW1lPVwiYWxsXCI+XG4gICAgICAgIHt7ICR0KFwicmVzZXRBbGxcIikgfX1cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICAgIDx2LXRhYmxlXG4gICAgICB2LWlmPVwiYWxsRGF0YUxvYWRlZFwiXG4gICAgICBvYmotbmFtZT1cInBsYW5ldHNDYWxjXCJcbiAgICAgIDpoZWFkPVwiaW5wdXQuc3RhdGljLmhlYWRcIlxuICAgICAgOmJvZHk9XCJpbnB1dC5zdGF0aWMuYm9keVwiXG4gICAgICA6bWF4LWxldmVsPVwiaW5wdXQuc3RhdGljLm1heExldmVsXCJcbiAgICAgIDpsdmwtY29sLWtleT1cIifihJYnXCJcbiAgICAgIDptZXJnZS1jZWxscz1cImZhbHNlXCJcbiAgICA+XG4gICAgICA8dGVtcGxhdGUgI2hlYWQ+XG4gICAgICAgIDx0aD57eyAkdChcImx2bFwiKSB9fTwvdGg+XG4gICAgICAgIDx0aD57eyAkdChcInBsYW5cIikgfX08L3RoPlxuICAgICAgPC90ZW1wbGF0ZT5cblxuICAgICAgPHRlbXBsYXRlICNib2R5PVwieyBsZXZlbCB9XCI+XG4gICAgICAgIDx0ZCB2LWZvcj1cInR5cGUgb2YgWydhY3R1YWxseScsICdwbGFuJ11cIiA6a2V5PVwidHlwZVwiPlxuICAgICAgICAgIDxzZWxlY3QgQGNoYW5nZT1cImNoYW5nZUx2bCh0eXBlLCBpbnB1dC5rZXlzW2xldmVsXSwgJGV2ZW50LnRhcmdldC52YWx1ZSlcIj5cbiAgICAgICAgICAgIDxvcHRpb25cbiAgICAgICAgICAgICAgdi1mb3I9XCIoaSwgaW5kZXgpIG9mIChpbnB1dC5tYXhVcGdyYWRlTGV2ZWxbbGV2ZWxdICsgMSlcIlxuICAgICAgICAgICAgICA6a2V5PVwidHlwZSArIGlcIlxuICAgICAgICAgICAgICA6c2VsZWN0ZWQ9XCJpc1NlbGVjdGVkKHR5cGUsIGxldmVsLCBpbmRleClcIlxuICAgICAgICAgICAgICA6ZGlzYWJsZWQ9XCJpc0Rpc2FibGVkKHR5cGUsIGxldmVsLCBpbmRleClcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7eyBpbmRleCB9fVxuICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L3RlbXBsYXRlPlxuICAgIDwvdi10YWJsZT5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IGZvcm1hdEtleSBmcm9tICcuLi9qcy9tb2R1bGVzL2Zvcm1hdEtleSc7XG5pbXBvcnQgZm9ybWF0VmFsdWUgZnJvbSAnLi4vanMvbW9kdWxlcy9mb3JtYXRWYWx1ZSc7XG5pbXBvcnQgVlRhYmxlIGZyb20gJy4vRGlzcGxheU9iamVjdFRhYmxlLnZ1ZSc7XG5cbmNvbnN0IGxvY2FsU3RvcmFnZUtleSA9ICdwbGFuZXRzQ2FsYyc7XG5jb25zdCBrZXlzID0gW1xuICAnQ3JlZGl0U3RvcmFnZScsXG4gICdGdWVsU3RvcmFnZScsXG4gICdDcmVkaXRzUGVySG91cicsXG4gICdGdWVsUGVySG91cicsXG4gICdTaGlwbWVudHNDUlZhbHVlUGVyRGF5Jyxcbl07XG5jb25zdCBrZXlzTW9kaWZpZXJzID0gW1xuICAnQ3JlZGl0U3RvcmFnZU1vZGlmaWVyJyxcbiAgJ0Z1ZWxTdG9yYWdlTW9kaWZpZXInLFxuICAnQ3JlZGl0SW5jb21lTW9kaWZpZXInLFxuICAnRnVlbEluY29tZU1vZGlmaWVyJyxcbiAgJ0NyZWRpdFNoaXBtZW50TW9kaWZpZXInLFxuXTtcbmNvbnN0IGtleXNUb3RhbCA9IFsnQ29zdCcsICdUaW1lVG9VcGdyYWRlJ107XG5jb25zdCByb3dzID0gWydhY3R1YWxseScsICdwbGFuJywgJ3Jlc3VsdCddO1xuY29uc3Qga2V5c0FsaWFzZXNUUyA9IHtcbiAgU2hpcG1lbnRzQ1JWYWx1ZVBlckRheTogJ1RvdGFsU2hpcG1lbnRDUlBlckRheScsXG4gIENvc3Q6ICdDb3N0JyxcbiAgVGltZVRvVXBncmFkZTogJ0NvbnN0cnVjdGlvblRpbWUnLFxufTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnVGhlUGxhbmV0c0NhbGMnLFxuICBjb21wb25lbnRzOiB7VlRhYmxlfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5wdXQ6IHtcbiAgICAgICAgc3RhdGljOiB7XG4gICAgICAgICAgaGVhZDogW10sXG4gICAgICAgICAgYm9keTogW10sXG4gICAgICAgICAgbWF4TGV2ZWw6IDAsXG4gICAgICAgIH0sXG4gICAgICAgIGtleXM6IFtdLFxuICAgICAgICBtYXhVcGdyYWRlTGV2ZWw6IFtdLFxuICAgICAgfSxcbiAgICAgIG91dHB1dDoge1xuICAgICAgICBjYWxjdWxhdGVkOiB7fSxcbiAgICAgICAgdG90YWw6IHt9LFxuICAgICAgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgcGxhbmV0czoge30sXG4gICAgICAgIGxldmVsczoge30sXG4gICAgICAgIHRyYWRpbmdTdGF0aW9uczoge30sXG4gICAgICB9LFxuICAgICAgc3RvcmFnZToge2FjdHVhbGx5OiB7fSwgcGxhbjoge319LFxuICAgICAgYWxsRGF0YUxvYWRlZDogZmFsc2UsXG4gICAgfTtcbiAgfSxcbiAgbW91bnRlZCgpIHtcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0obG9jYWxTdG9yYWdlS2V5KSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbFN0b3JhZ2VLZXkpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0obG9jYWxTdG9yYWdlS2V5KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGNyZWF0ZWQoKSB7XG4gICAgdGhpcy5sb2FkRGF0YSgpO1xuICB9LFxuICBtZXRob2RzOiB7XG4gICAgbG9hZERhdGEoKSB7XG4gICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgIGltcG9ydCgnLi4vLi4vLi4vZGF0YS9wbGFuZXRzJyksXG4gICAgICAgIGltcG9ydCgnLi4vLi4vLi4vZGF0YS9wbGFuZXRfbGV2ZWxzJyksXG4gICAgICAgIGltcG9ydCgnLi4vLi4vLi4vZGF0YS9zcGFjZWJ1aWxkaW5ncycpLFxuICAgICAgXSlcbiAgICAgICAgICAudGhlbigoW3BsYW5ldHMsIHBsYW5ldExldmVscywgc3BhY2VidWlsZGluZ3NdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGEucGxhbmV0cyA9IHBsYW5ldHMuZGF0YS55ZWxsb3dzdGFyVGFibGU7XG4gICAgICAgICAgICB0aGlzLmRhdGEubGV2ZWxzID0gcGxhbmV0TGV2ZWxzLmRhdGE7XG4gICAgICAgICAgICB0aGlzLmRhdGEudHJhZGluZ1N0YXRpb25zID0gc3BhY2VidWlsZGluZ3MuZGF0YS5UcmFkaW5nU3RhdGlvbjtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKHRoaXMuZ2VuZXJhdGVJbnB1dFRhYmxlKVxuICAgICAgICAgIC50aGVuKHRoaXMudXBkYXRlT3V0cHV0KVxuICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuYWxsRGF0YUxvYWRlZCA9IHRydWUpXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgIH0sXG4gICAgY3JlYXRlQ2VsbHMoKSB7XG4gICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICAgcm93cy5mb3JFYWNoKChlKSA9PiAocmVzdWx0W2VdID0gMCkpO1xuXG4gICAgICAgIHRoaXMuJHNldCh0aGlzLm91dHB1dC5jYWxjdWxhdGVkLCBrZXksIHJlc3VsdCk7XG4gICAgICB9KTtcbiAgICAgIGtleXNUb3RhbC5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgdGhpcy4kc2V0KHRoaXMub3V0cHV0LnRvdGFsLCBrZXksIDApO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZW5lcmF0ZUlucHV0VGFibGUoKSB7XG4gICAgICBjb25zdCBvYmogPSB7XG4gICAgICAgIE5hbWU6IHRoaXMuZGF0YS5wbGFuZXRzLk5hbWUsXG4gICAgICAgIE1heFVwZ3JhZGVMZXZlbDogdGhpcy5kYXRhLnBsYW5ldHMuTWF4VXBncmFkZUxldmVsLFxuXG4gICAgICAgIFRJRDogdGhpcy5kYXRhLnBsYW5ldHMuVElELFxuICAgICAgICBtYXhMZXZlbDogdGhpcy5kYXRhLnBsYW5ldHMubWF4TGV2ZWwsXG4gICAgICB9O1xuXG4gICAgICAvLyDQtNC+0LHQsNCy0LjRgtGMINGC0L7RgNCz0LhcbiAgICAgIGZvciAobGV0IGkgPSAwOyB0aGlzLmRhdGEudHJhZGluZ1N0YXRpb25zLk1heE9uT3duU29sYXJTeXN0ZW0gPiBpOyBpKyspIHtcbiAgICAgICAgb2JqLk5hbWUucHVzaCh0aGlzLmRhdGEudHJhZGluZ1N0YXRpb25zLk5hbWUgKyAnXycgKyBpKTtcbiAgICAgICAgb2JqLk1heFVwZ3JhZGVMZXZlbC5wdXNoKHRoaXMuZGF0YS50cmFkaW5nU3RhdGlvbnMubWF4TGV2ZWwpO1xuXG4gICAgICAgIG9iai5USUQucHVzaCh0aGlzLmRhdGEudHJhZGluZ1N0YXRpb25zLlRJRCk7XG4gICAgICAgIG9iai5tYXhMZXZlbCsrO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmlucHV0LmtleXMgPSBvYmouTmFtZTtcbiAgICAgIHRoaXMuaW5wdXQubWF4VXBncmFkZUxldmVsID0gb2JqLk1heFVwZ3JhZGVMZXZlbDtcblxuICAgICAgdGhpcy5pbnB1dC5zdGF0aWMuaGVhZC5wdXNoKCdUSUQnKTtcbiAgICAgIHRoaXMuaW5wdXQuc3RhdGljLmJvZHkucHVzaChvYmouVElEKTtcbiAgICAgIHRoaXMuaW5wdXQuc3RhdGljLm1heExldmVsID0gb2JqLm1heExldmVsO1xuICAgIH0sXG4gICAgZ2V0Rm9ybWF0S2V5KC4uLmFyZ3MpIHtcbiAgICAgIGNvbnN0ICR0ID0gKGtleSkgPT4gdGhpcy4kdC5jYWxsKHRoaXMsIGtleSk7XG4gICAgICByZXR1cm4gZm9ybWF0S2V5KCR0LCB0aGlzLm9iak5hbWUsIC4uLmFyZ3MpO1xuICAgIH0sXG4gICAgZ2V0Rm9ybWF0VmFsdWUoLi4uYXJncykge1xuICAgICAgY29uc3QgJHQgPSAoa2V5KSA9PiB0aGlzLiR0LmNhbGwodGhpcywga2V5KTtcbiAgICAgIGNvbnN0ICR0ZSA9IChrZXkpID0+IHRoaXMuJHRlLmNhbGwodGhpcywga2V5KTtcbiAgICAgIHJldHVybiBmb3JtYXRWYWx1ZSgkdCwgJHRlLCBudWxsLCAuLi5hcmdzKTtcbiAgICB9LFxuICAgIGlzU2VsZWN0ZWQodHlwZSwga2V5SW5kZXgsIHZhbHVlKSB7XG4gICAgICBjb25zdCBrZXkgPSB0aGlzLmlucHV0LmtleXNba2V5SW5kZXhdO1xuICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnN0b3JhZ2UucGxhbltrZXldIHx8IDA7XG4gICAgICBjb25zdCBtaW4gPSB0aGlzLnN0b3JhZ2UuYWN0dWFsbHlba2V5XTtcblxuICAgICAgaWYgKG1pbiA+IGN1cnJlbnQpIHtcbiAgICAgICAgY3VycmVudCA9IHRoaXMuY2hhbmdlTHZsKCdwbGFuJywga2V5LCBtaW4pO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT0gJ3BsYW4nKSB7XG4gICAgICAgIHJldHVybiAodmFsdWUgPT0gY3VycmVudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gKHRoaXMuc3RvcmFnZVt0eXBlXVtrZXldID09IHZhbHVlKTtcbiAgICB9LFxuICAgIGlzRGlzYWJsZWQodHlwZSwga2V5SW5kZXgsIHZhbHVlKSB7XG4gICAgICBjb25zdCBrZXkgPSB0aGlzLmlucHV0LmtleXNba2V5SW5kZXhdO1xuXG4gICAgICBpZiAodHlwZSAhPSAncGxhbicpIHJldHVybjtcbiAgICAgIGlmICghdGhpcy5zdG9yYWdlLmFjdHVhbGx5KSByZXR1cm47XG4gICAgICByZXR1cm4gKHZhbHVlIDwgdGhpcy5zdG9yYWdlLmFjdHVhbGx5W2tleV0pO1xuICAgIH0sXG4gICAgcmVzZXQoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC50YXJnZXQubmFtZSA9PSAnYWxsJykge1xuICAgICAgICBjb25zdCBtc2cgPSBjb25maXJtKCdSZXNldCBhbGw/IEFyIHUgc2VyaW91cyA/Jyk7XG4gICAgICAgIGlmIChtc2cpIHtcbiAgICAgICAgICB0aGlzLnN0b3JhZ2UgPSB7YWN0dWFsbHk6IHt9LCBwbGFuOiB7fX07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5zdG9yYWdlLnBsYW4pIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnN0b3JhZ2UucGxhbikuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UucGxhbltrZXldID0gdGhpcy5zdG9yYWdlLmFjdHVhbGx5W2tleV07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zdG9yYWdlLnBsYW4gPSB7fTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVPdXRwdXQoKTtcbiAgICAgIC8vIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0sXG4gICAgY2hhbmdlTHZsKHR5cGUsIGtleSwgdmFsdWUpIHtcbiAgICAgIHZhbHVlID0gcGFyc2VJbnQodmFsdWUpO1xuXG4gICAgICB0aGlzLiRzZXQodGhpcy5zdG9yYWdlW3R5cGVdLCBrZXksIHBhcnNlSW50KHZhbHVlKSk7XG4gICAgICB0aGlzLnVwZGF0ZU91dHB1dCgpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdXBkYXRlU3RvcmFnZSgpIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGxvY2FsU3RvcmFnZUtleSwgSlNPTi5zdHJpbmdpZnkodGhpcy5zdG9yYWdlKSk7XG4gICAgfSxcbiAgICB1cGRhdGVPdXRwdXQoKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSB0aGlzLm91dHB1dC5jYWxjdWxhdGVkO1xuICAgICAgY29uc3QgcmVzdWx0VG90YWwgPSB0aGlzLm91dHB1dC50b3RhbDtcbiAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5pbnB1dC5rZXlzO1xuXG4gICAgICBjb25zdCBwbGFuZXRzID0gdGhpcy5kYXRhLnBsYW5ldHM7XG4gICAgICBjb25zdCBsZXZlbHMgPSB0aGlzLmRhdGEubGV2ZWxzO1xuICAgICAgY29uc3QgdHJhZGluZ1N0YXRpb25zID0gdGhpcy5kYXRhLnRyYWRpbmdTdGF0aW9ucztcblxuICAgICAgdGhpcy5jcmVhdGVDZWxscygpOyAvLyDQstCw0LnQv9C90YPRgtGMINC30L3QsNGH0LXQvdC40Y9cbiAgICAgIHRoaXMudXBkYXRlU3RvcmFnZSgpOyAvLyDRgdC40L3RhdGA0L7QvdC40LfQuNGA0L7QstCw0YLRjCDRhdGA0LDQvdC40LvQuNGJ0LVcblxuICAgICAgT2JqZWN0LmtleXModGhpcy5zdG9yYWdlKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgaWYgKCFPYmplY3Qua2V5cyh0aGlzLnN0b3JhZ2Vba2V5XSkubGVuZ3RoKSByZXR1cm47XG5cbiAgICAgICAgdXBkYXRlQ29sKGtleSwgdGhpcy5zdG9yYWdlW2tleV0pO1xuICAgICAgfSk7XG5cbiAgICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaCgoa2V5KSA9PiB7IC8vINCy0YvRh9C40YHQu9C40YLRjCDQv9GA0LjRgNC+0YHRgiDQv9C70LDQvdCwXG4gICAgICAgIHJlc3VsdFtrZXldLnBsYW4gPSAocmVzdWx0W2tleV0ucGxhbiAtIHJlc3VsdFtrZXldLmFjdHVhbGx5KTtcbiAgICAgIH0pO1xuICAgICAgdXBkYXRlQ29sKCdyZXN1bHQnLCB0aGlzLnN0b3JhZ2UucGxhbik7XG4gICAgICBjYWxjdWxhdGVUb3RhbCh0aGlzLnN0b3JhZ2UpO1xuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVDb2wobW9kZSwgb2JqKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGl0ZW1MdmwgPSBvYmpbaXRlbV0gLSAxO1xuICAgICAgICAgIGNvbnN0IGl0ZW1JbmRleCA9IGl0ZW1zLmluZGV4T2YoaXRlbSk7XG5cbiAgICAgICAgICBpZiAoIW9ialtpdGVtXSkgcmV0dXJuO1xuICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaCgoa2V5LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgbGV0IG51bTE7XG4gICAgICAgICAgICBsZXQgbnVtMjtcblxuICAgICAgICAgICAgaWYgKG1vZGUgPT0gJ3Jlc3VsdCcpIHsgLy8g0L7QsdC90L7QstC40YLRjCDRgNC10LfRg9C70YzRgtCw0YJcbiAgICAgICAgICAgICAgbnVtMSA9IHJlc3VsdFtrZXldLnBsYW47XG4gICAgICAgICAgICAgIG51bTIgPSByZXN1bHRba2V5XS5hY3R1YWxseTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG51bTEgPSByZXN1bHRba2V5XVttb2RlXSB8fCAwO1xuICAgICAgICAgICAgICBpZiAoa2V5c01vZGlmaWVyc1tpbmRleF0pIHtcbiAgICAgICAgICAgICAgICBudW0yID0gKGxldmVsc1trZXldW2l0ZW1MdmxdICogcGxhbmV0c1trZXlzTW9kaWZpZXJzW2luZGV4XV1baXRlbUluZGV4XSkgLyAxMDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pbmNsdWRlcygnVHJhZGluZ1N0YXRpb24nKSkge1xuICAgICAgICAgICAgICAgICAgbnVtMiA9IDA7XG4gICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIGtleXNBbGlhc2VzVFMpIHtcbiAgICAgICAgICAgICAgICAgICAgbnVtMiA9IHRyYWRpbmdTdGF0aW9uc1trZXlzQWxpYXNlc1RTW2tleV1dW2l0ZW1MdmxdO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBudW0yID0gbGV2ZWxzW2tleV1baXRlbUx2bF07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdFtrZXldW21vZGVdID0gbnVtMSArIG51bTI7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlVG90YWwob2JqKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKG9iai5wbGFuKS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgaWYgKG9iai5wbGFuW2l0ZW1dID09IDApIHJldHVybjtcbiAgICAgICAgICBPYmplY3Qua2V5cyhyZXN1bHRUb3RhbCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBsZXQgbnVtMSA9IDA7XG4gICAgICAgICAgICBsZXQgbnVtMiA9IDA7XG4gICAgICAgICAgICBjb25zdCBQbGFuSW5kZXhMdmwgPSBvYmoucGxhbltpdGVtXSAtIDE7XG4gICAgICAgICAgICBjb25zdCBBY3R1YWxseUluZGV4THZsID0gKG9iai5hY3R1YWxseVtpdGVtXSB8fCAwKSAtIDE7XG5cbiAgICAgICAgICAgIG51bTEgPSAocmVzdWx0VG90YWxba2V5XSA9PSB1bmRlZmluZWQpID8gMCA6IHJlc3VsdFRvdGFsW2tleV07XG4gICAgICAgICAgICBmb3IgKGxldCBsZXZlbCA9IEFjdHVhbGx5SW5kZXhMdmw7IFBsYW5JbmRleEx2bCA+IGxldmVsOyBsZXZlbCsrKSB7XG4gICAgICAgICAgICAgIGxldCBkYXRhID0gbGV2ZWxzW2tleV1bbGV2ZWwgKyAxXSB8fCAwO1xuXG4gICAgICAgICAgICAgIGlmIChpdGVtLmluY2x1ZGVzKCdUcmFkaW5nU3RhdGlvbicpICYmIGtleSBpbiBrZXlzQWxpYXNlc1RTKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHRyYWRpbmdTdGF0aW9uc1trZXlzQWxpYXNlc1RTW2tleV1dW2xldmVsICsgMV0gfHwgMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBudW0yID0gbnVtMiArIGRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHRUb3RhbFtrZXldID0gbnVtMSArIG51bTI7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgb3V0cHV0Q2xhc3Nlc1RhYmxlKHR5cGUsIGtleSkge1xuICAgICAgaWYgKHR5cGUgPT0gJ3BsYW4nKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgJ3BsYW4tcGx1cyc6IHRoaXMub3V0cHV0LmNhbGN1bGF0ZWRba2V5XS5wbGFuLFxuICAgICAgICAgICdoaWRlJzogdGhpcy5vdXRwdXQuY2FsY3VsYXRlZFtrZXldLnBsYW4gPT0gMCxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09ICdyZXN1bHQnKSB7XG4gICAgICAgIGNvbnN0IGlzR3Jvd3RoID0gKHRoaXMub3V0cHV0LmNhbGN1bGF0ZWRba2V5XS5hY3R1YWxseSA8IHRoaXMub3V0cHV0LmNhbGN1bGF0ZWRba2V5XS5yZXN1bHQpO1xuICAgICAgICBjb25zdCBpc0hpZGUgPSAhdGhpcy5vdXRwdXQudG90YWxbT2JqZWN0LmtleXModGhpcy5vdXRwdXQudG90YWwpWzBdXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAncmVzdWx0LWdyb3d0aCc6IGlzR3Jvd3RoLFxuICAgICAgICAgICdyZXN1bHQtbm90LWdyb3d0aCc6ICFpc0dyb3d0aCxcbiAgICAgICAgICAnaGlkZSc6IGlzSGlkZSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxufTtcbjwvc2NyaXB0PlxuXG48c3R5bGUgc2NvcGVkPlxuLnBsYW5ldHNDYWxjIHtcbiAgYm9yZGVyOiAxcHggc29saWQgIzQyNDU0NztcbiAgYm9yZGVyLXNwYWNpbmc6IDA7XG4gIGNvbG9yOiAjYWFiMmI2O1xuXG4gIHdpZHRoOiA5MCU7XG4gIG1heC13aWR0aDogNDUwcHg7XG4gIG1hcmdpbjogMTVweCBhdXRvO1xufVxuLnBsYW5ldHNDYWxjID4+PiB0ZCB7XG4gIHBhZGRpbmc6IDhweCAxMHB4IDhweDtcbiAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiA3NSU7XG4gIGJvcmRlcjogbm9uZTtcbn1cbi5wbGFuZXRzQ2FsYyB0ZDpmaXJzdC1jaGlsZCB7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG59XG4ucGxhbmV0c0NhbGMgdHIudG90YWwge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDksIDEyLCAxMiwgMC45OSk7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4uaGlkZSB7XG4gIHZpc2liaWxpdHk6IGNvbGxhcHNlO1xufVxuLnBsYW4tcGx1cyB7XG4gIGNvbG9yOiAjZmZmMTlmO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuLnBsYW4tcGx1czpiZWZvcmUge1xuICBjb250ZW50OiBcIitcIjtcbn1cbi5yZXN1bHQtZ3Jvd3RoIHtcbiAgY29sb3I6ICMxZTdlMzQ7XG59XG4ucmVzdWx0LW5vdC1ncm93dGh7XG4gIG9wYWNpdHk6IDAuNTtcbn1cblxuLnJlc2V0QnV0dG9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogcmlnaHQ7XG4gIHBhZGRpbmctcmlnaHQ6IDMlO1xufVxuLnJlc2V0QnV0dG9ucyBidXR0b24ge1xuICBjb2xvcjogI2ZmZjtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBUcmFuc3BhcmVudDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXI6IDFweCBzb2xpZCAjZjdjYTE4O1xuICB0cmFuc2l0aW9uOiBhbGwgMC40cyBjdWJpYy1iZXppZXIoMC40MiwgMCwgMC41OCwgMSk7XG4gIHBhZGRpbmc6IDEwcHggMTBweDtcbiAgbWFyZ2luLWxlZnQ6IDVweDtcbn1cbi5yZXNldEJ1dHRvbnMgYnV0dG9uOmhvdmVyIHtcbiAgY29sb3I6ICMwMDA7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xufVxuLnJlc2V0QnV0dG9ucyBidXR0b246aG92ZXI6YmVmb3JlIHtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IGF1dG87XG4gIHdpZHRoOiAxMDAlO1xufVxuLnJlc2V0QnV0dG9ucyBidXR0b246YmVmb3JlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAwO1xuICB6LWluZGV4OiAtMTtcbiAgY29udGVudDogXCJcIjtcbiAgYmFja2dyb3VuZDogI2Y3Y2ExODtcbiAgdHJhbnNpdGlvbjogYWxsIDAuNHMgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpO1xufVxuLnJlc2V0QnV0dG9uQWxsIHtcbiAgYm9yZGVyOiAxcHggc29saWQgI2M5MDAwMCAhaW1wb3J0YW50O1xufVxuLnJlc2V0QnV0dG9uQWxsOmJlZm9yZSB7XG4gIGJhY2tncm91bmQ6ICNjOTAwMDAgIWltcG9ydGFudDtcbn1cbjwvc3R5bGU+XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18odHJ1ZSk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCJcXG4ucGxhbmV0c0NhbGNbZGF0YS12LTBjN2M1MTNlXSB7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjNDI0NTQ3O1xcbiAgYm9yZGVyLXNwYWNpbmc6IDA7XFxuICBjb2xvcjogI2FhYjJiNjtcXG5cXG4gIHdpZHRoOiA5MCU7XFxuICBtYXgtd2lkdGg6IDQ1MHB4O1xcbiAgbWFyZ2luOiAxNXB4IGF1dG87XFxufVxcbi5wbGFuZXRzQ2FsY1tkYXRhLXYtMGM3YzUxM2VdIHRkIHtcXG4gIHBhZGRpbmc6IDhweCAxMHB4IDhweDtcXG4gIGxpbmUtaGVpZ2h0OiAxNnB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgZm9udC1zaXplOiA3NSU7XFxuICBib3JkZXI6IG5vbmU7XFxufVxcbi5wbGFuZXRzQ2FsYyB0ZFtkYXRhLXYtMGM3YzUxM2VdOmZpcnN0LWNoaWxkIHtcXG4gIHRleHQtYWxpZ246IGxlZnQ7XFxufVxcbi5wbGFuZXRzQ2FsYyB0ci50b3RhbFtkYXRhLXYtMGM3YzUxM2VdIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoOSwgMTIsIDEyLCAwLjk5KTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbn1cXG4uaGlkZVtkYXRhLXYtMGM3YzUxM2VdIHtcXG4gIHZpc2liaWxpdHk6IGNvbGxhcHNlO1xcbn1cXG4ucGxhbi1wbHVzW2RhdGEtdi0wYzdjNTEzZV0ge1xcbiAgY29sb3I6ICNmZmYxOWY7XFxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbn1cXG4ucGxhbi1wbHVzW2RhdGEtdi0wYzdjNTEzZV06YmVmb3JlIHtcXG4gIGNvbnRlbnQ6IFxcXCIrXFxcIjtcXG59XFxuLnJlc3VsdC1ncm93dGhbZGF0YS12LTBjN2M1MTNlXSB7XFxuICBjb2xvcjogIzFlN2UzNDtcXG59XFxuLnJlc3VsdC1ub3QtZ3Jvd3RoW2RhdGEtdi0wYzdjNTEzZV17XFxuICBvcGFjaXR5OiAwLjU7XFxufVxcbi5yZXNldEJ1dHRvbnNbZGF0YS12LTBjN2M1MTNlXSB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiByaWdodDtcXG4gIHBhZGRpbmctcmlnaHQ6IDMlO1xcbn1cXG4ucmVzZXRCdXR0b25zIGJ1dHRvbltkYXRhLXYtMGM3YzUxM2VdIHtcXG4gIGNvbG9yOiAjZmZmO1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogVHJhbnNwYXJlbnQ7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjZjdjYTE4O1xcbiAgdHJhbnNpdGlvbjogYWxsIDAuNHMgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpO1xcbiAgcGFkZGluZzogMTBweCAxMHB4O1xcbiAgbWFyZ2luLWxlZnQ6IDVweDtcXG59XFxuLnJlc2V0QnV0dG9ucyBidXR0b25bZGF0YS12LTBjN2M1MTNlXTpob3ZlciB7XFxuICBjb2xvcjogIzAwMDtcXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xcbn1cXG4ucmVzZXRCdXR0b25zIGJ1dHRvbltkYXRhLXYtMGM3YzUxM2VdOmhvdmVyOmJlZm9yZSB7XFxuICBsZWZ0OiAwO1xcbiAgcmlnaHQ6IGF1dG87XFxuICB3aWR0aDogMTAwJTtcXG59XFxuLnJlc2V0QnV0dG9ucyBidXR0b25bZGF0YS12LTBjN2M1MTNlXTpiZWZvcmUge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiAwO1xcbiAgcmlnaHQ6IDA7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICB3aWR0aDogMDtcXG4gIHotaW5kZXg6IC0xO1xcbiAgY29udGVudDogXFxcIlxcXCI7XFxuICBiYWNrZ3JvdW5kOiAjZjdjYTE4O1xcbiAgdHJhbnNpdGlvbjogYWxsIDAuNHMgY3ViaWMtYmV6aWVyKDAuNDIsIDAsIDAuNTgsIDEpO1xcbn1cXG4ucmVzZXRCdXR0b25BbGxbZGF0YS12LTBjN2M1MTNlXSB7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjYzkwMDAwICFpbXBvcnRhbnQ7XFxufVxcbi5yZXNldEJ1dHRvbkFsbFtkYXRhLXYtMGM3YzUxM2VdOmJlZm9yZSB7XFxuICBiYWNrZ3JvdW5kOiAjYzkwMDAwICFpbXBvcnRhbnQ7XFxufVxcblwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcImZyb250ZW5kL3NyYy9jb21wb25lbnRzL1RoZVBsYW5ldHNDYWxjLnZ1ZVwiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiO0FBa1ZBO0VBQ0EseUJBQUE7RUFDQSxpQkFBQTtFQUNBLGNBQUE7O0VBRUEsVUFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7QUFDQTtBQUNBO0VBQ0EscUJBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLFlBQUE7QUFDQTtBQUNBO0VBQ0EsZ0JBQUE7QUFDQTtBQUNBO0VBQ0EsdUNBQUE7RUFDQSxpQkFBQTtBQUNBO0FBRUE7RUFDQSxvQkFBQTtBQUNBO0FBQ0E7RUFDQSxjQUFBO0VBQ0EsbUJBQUE7QUFDQTtBQUNBO0VBQ0EsWUFBQTtBQUNBO0FBQ0E7RUFDQSxjQUFBO0FBQ0E7QUFDQTtFQUNBLFlBQUE7QUFDQTtBQUVBO0VBQ0EsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsaUJBQUE7QUFDQTtBQUNBO0VBQ0EsV0FBQTtFQUNBLGVBQUE7RUFDQSw2QkFBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7RUFDQSxtREFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7QUFDQTtBQUNBO0VBQ0EsV0FBQTtFQUNBLDZCQUFBO0FBQ0E7QUFDQTtFQUNBLE9BQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtBQUNBO0FBQ0E7RUFDQSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxRQUFBO0VBQ0EsWUFBQTtFQUNBLFFBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtFQUNBLG1CQUFBO0VBQ0EsbURBQUE7QUFDQTtBQUNBO0VBQ0Esb0NBQUE7QUFDQTtBQUNBO0VBQ0EsOEJBQUE7QUFDQVwiLFwiZmlsZVwiOlwiVGhlUGxhbmV0c0NhbGMudnVlXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIjx0ZW1wbGF0ZT5cXG4gIDxkaXY+XFxuICAgIDx0YWJsZSBjbGFzcz1cXFwicGxhbmV0c0NhbGNcXFwiPlxcbiAgICAgIDx0ciB2LWZvcj1cXFwiKHZhbHVlLCBrZXkpIG9mIG91dHB1dC5jYWxjdWxhdGVkXFxcIiA6a2V5PVxcXCJrZXlcXFwiPlxcbiAgICAgICAgPHRkPnt7IGdldEZvcm1hdEtleShrZXkpIH19PC90ZD5cXG4gICAgICAgIDx0ZCB2LWZvcj1cXFwiKGl0ZW0sIGl0ZW1LZXkpIG9mIHZhbHVlXFxcIiA6a2V5PVxcXCJrZXkgKyBpdGVtS2V5XFxcIlxcbiAgICAgICAgICAgIDpjbGFzcz1cXFwib3V0cHV0Q2xhc3Nlc1RhYmxlKGl0ZW1LZXksIGtleSlcXFwiXFxuICAgICAgICA+XFxuICAgICAgICAgIHt7IGl0ZW0udG9Mb2NhbGVTdHJpbmcoKSB9fVxcbiAgICAgICAgPC90ZD5cXG4gICAgICA8L3RyPlxcbiAgICAgIDx0ciBjbGFzcz1cXFwidG90YWxcXFwiIHYtZm9yPVxcXCIodmFsdWUsIGtleSkgb2Ygb3V0cHV0LnRvdGFsXFxcIiA6a2V5PVxcXCJrZXlcXFwiPlxcbiAgICAgICAgPHRkPnt7ICR0KGtleSkgfX08L3RkPlxcbiAgICAgICAgPHRkIGNvbHNwYW49XFxcIjNcXFwiPlxcbiAgICAgICAgICB7eyBnZXRGb3JtYXRWYWx1ZShrZXksIHZhbHVlKSB9fVxcbiAgICAgICAgPC90ZD5cXG4gICAgICA8L3RyPlxcbiAgICA8L3RhYmxlPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJyZXNldEJ1dHRvbnNcXFwiPlxcbiAgICAgIDxidXR0b24gQGNsaWNrPVxcXCJyZXNldFxcXCIgbmFtZT1cXFwicGxhblxcXCI+XFxuICAgICAgICB7eyAkdChcXFwicmVzZXRQbGFuXFxcIikgfX1cXG4gICAgICA8L2J1dHRvbj5cXG4gICAgICA8YnV0dG9uIGNsYXNzPVxcXCJyZXNldEJ1dHRvbkFsbFxcXCIgQGNsaWNrPVxcXCJyZXNldFxcXCIgbmFtZT1cXFwiYWxsXFxcIj5cXG4gICAgICAgIHt7ICR0KFxcXCJyZXNldEFsbFxcXCIpIH19XFxuICAgICAgPC9idXR0b24+XFxuICAgIDwvZGl2PlxcbiAgICA8di10YWJsZVxcbiAgICAgIHYtaWY9XFxcImFsbERhdGFMb2FkZWRcXFwiXFxuICAgICAgb2JqLW5hbWU9XFxcInBsYW5ldHNDYWxjXFxcIlxcbiAgICAgIDpoZWFkPVxcXCJpbnB1dC5zdGF0aWMuaGVhZFxcXCJcXG4gICAgICA6Ym9keT1cXFwiaW5wdXQuc3RhdGljLmJvZHlcXFwiXFxuICAgICAgOm1heC1sZXZlbD1cXFwiaW5wdXQuc3RhdGljLm1heExldmVsXFxcIlxcbiAgICAgIDpsdmwtY29sLWtleT1cXFwiJ+KElidcXFwiXFxuICAgICAgOm1lcmdlLWNlbGxzPVxcXCJmYWxzZVxcXCJcXG4gICAgPlxcbiAgICAgIDx0ZW1wbGF0ZSAjaGVhZD5cXG4gICAgICAgIDx0aD57eyAkdChcXFwibHZsXFxcIikgfX08L3RoPlxcbiAgICAgICAgPHRoPnt7ICR0KFxcXCJwbGFuXFxcIikgfX08L3RoPlxcbiAgICAgIDwvdGVtcGxhdGU+XFxuXFxuICAgICAgPHRlbXBsYXRlICNib2R5PVxcXCJ7IGxldmVsIH1cXFwiPlxcbiAgICAgICAgPHRkIHYtZm9yPVxcXCJ0eXBlIG9mIFsnYWN0dWFsbHknLCAncGxhbiddXFxcIiA6a2V5PVxcXCJ0eXBlXFxcIj5cXG4gICAgICAgICAgPHNlbGVjdCBAY2hhbmdlPVxcXCJjaGFuZ2VMdmwodHlwZSwgaW5wdXQua2V5c1tsZXZlbF0sICRldmVudC50YXJnZXQudmFsdWUpXFxcIj5cXG4gICAgICAgICAgICA8b3B0aW9uXFxuICAgICAgICAgICAgICB2LWZvcj1cXFwiKGksIGluZGV4KSBvZiAoaW5wdXQubWF4VXBncmFkZUxldmVsW2xldmVsXSArIDEpXFxcIlxcbiAgICAgICAgICAgICAgOmtleT1cXFwidHlwZSArIGlcXFwiXFxuICAgICAgICAgICAgICA6c2VsZWN0ZWQ9XFxcImlzU2VsZWN0ZWQodHlwZSwgbGV2ZWwsIGluZGV4KVxcXCJcXG4gICAgICAgICAgICAgIDpkaXNhYmxlZD1cXFwiaXNEaXNhYmxlZCh0eXBlLCBsZXZlbCwgaW5kZXgpXFxcIlxcbiAgICAgICAgICAgID5cXG4gICAgICAgICAgICAgIHt7IGluZGV4IH19XFxuICAgICAgICAgICAgPC9vcHRpb24+XFxuICAgICAgICAgIDwvc2VsZWN0PlxcbiAgICAgICAgPC90ZD5cXG4gICAgICA8L3RlbXBsYXRlPlxcbiAgICA8L3YtdGFibGU+XFxuICA8L2Rpdj5cXG48L3RlbXBsYXRlPlxcblxcbjxzY3JpcHQ+XFxuaW1wb3J0IGZvcm1hdEtleSBmcm9tICcuLi9qcy9tb2R1bGVzL2Zvcm1hdEtleSc7XFxuaW1wb3J0IGZvcm1hdFZhbHVlIGZyb20gJy4uL2pzL21vZHVsZXMvZm9ybWF0VmFsdWUnO1xcbmltcG9ydCBWVGFibGUgZnJvbSAnLi9EaXNwbGF5T2JqZWN0VGFibGUudnVlJztcXG5cXG5jb25zdCBsb2NhbFN0b3JhZ2VLZXkgPSAncGxhbmV0c0NhbGMnO1xcbmNvbnN0IGtleXMgPSBbXFxuICAnQ3JlZGl0U3RvcmFnZScsXFxuICAnRnVlbFN0b3JhZ2UnLFxcbiAgJ0NyZWRpdHNQZXJIb3VyJyxcXG4gICdGdWVsUGVySG91cicsXFxuICAnU2hpcG1lbnRzQ1JWYWx1ZVBlckRheScsXFxuXTtcXG5jb25zdCBrZXlzTW9kaWZpZXJzID0gW1xcbiAgJ0NyZWRpdFN0b3JhZ2VNb2RpZmllcicsXFxuICAnRnVlbFN0b3JhZ2VNb2RpZmllcicsXFxuICAnQ3JlZGl0SW5jb21lTW9kaWZpZXInLFxcbiAgJ0Z1ZWxJbmNvbWVNb2RpZmllcicsXFxuICAnQ3JlZGl0U2hpcG1lbnRNb2RpZmllcicsXFxuXTtcXG5jb25zdCBrZXlzVG90YWwgPSBbJ0Nvc3QnLCAnVGltZVRvVXBncmFkZSddO1xcbmNvbnN0IHJvd3MgPSBbJ2FjdHVhbGx5JywgJ3BsYW4nLCAncmVzdWx0J107XFxuY29uc3Qga2V5c0FsaWFzZXNUUyA9IHtcXG4gIFNoaXBtZW50c0NSVmFsdWVQZXJEYXk6ICdUb3RhbFNoaXBtZW50Q1JQZXJEYXknLFxcbiAgQ29zdDogJ0Nvc3QnLFxcbiAgVGltZVRvVXBncmFkZTogJ0NvbnN0cnVjdGlvblRpbWUnLFxcbn07XFxuXFxuZXhwb3J0IGRlZmF1bHQge1xcbiAgbmFtZTogJ1RoZVBsYW5ldHNDYWxjJyxcXG4gIGNvbXBvbmVudHM6IHtWVGFibGV9LFxcbiAgZGF0YSgpIHtcXG4gICAgcmV0dXJuIHtcXG4gICAgICBpbnB1dDoge1xcbiAgICAgICAgc3RhdGljOiB7XFxuICAgICAgICAgIGhlYWQ6IFtdLFxcbiAgICAgICAgICBib2R5OiBbXSxcXG4gICAgICAgICAgbWF4TGV2ZWw6IDAsXFxuICAgICAgICB9LFxcbiAgICAgICAga2V5czogW10sXFxuICAgICAgICBtYXhVcGdyYWRlTGV2ZWw6IFtdLFxcbiAgICAgIH0sXFxuICAgICAgb3V0cHV0OiB7XFxuICAgICAgICBjYWxjdWxhdGVkOiB7fSxcXG4gICAgICAgIHRvdGFsOiB7fSxcXG4gICAgICB9LFxcbiAgICAgIGRhdGE6IHtcXG4gICAgICAgIHBsYW5ldHM6IHt9LFxcbiAgICAgICAgbGV2ZWxzOiB7fSxcXG4gICAgICAgIHRyYWRpbmdTdGF0aW9uczoge30sXFxuICAgICAgfSxcXG4gICAgICBzdG9yYWdlOiB7YWN0dWFsbHk6IHt9LCBwbGFuOiB7fX0sXFxuICAgICAgYWxsRGF0YUxvYWRlZDogZmFsc2UsXFxuICAgIH07XFxuICB9LFxcbiAgbW91bnRlZCgpIHtcXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxvY2FsU3RvcmFnZUtleSkpIHtcXG4gICAgICB0cnkge1xcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbFN0b3JhZ2VLZXkpKTtcXG4gICAgICB9IGNhdGNoIChlKSB7XFxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShsb2NhbFN0b3JhZ2VLZXkpO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfSxcXG4gIGNyZWF0ZWQoKSB7XFxuICAgIHRoaXMubG9hZERhdGEoKTtcXG4gIH0sXFxuICBtZXRob2RzOiB7XFxuICAgIGxvYWREYXRhKCkge1xcbiAgICAgIFByb21pc2UuYWxsKFtcXG4gICAgICAgIGltcG9ydCgnLi4vLi4vLi4vZGF0YS9wbGFuZXRzJyksXFxuICAgICAgICBpbXBvcnQoJy4uLy4uLy4uL2RhdGEvcGxhbmV0X2xldmVscycpLFxcbiAgICAgICAgaW1wb3J0KCcuLi8uLi8uLi9kYXRhL3NwYWNlYnVpbGRpbmdzJyksXFxuICAgICAgXSlcXG4gICAgICAgICAgLnRoZW4oKFtwbGFuZXRzLCBwbGFuZXRMZXZlbHMsIHNwYWNlYnVpbGRpbmdzXSkgPT4ge1xcbiAgICAgICAgICAgIHRoaXMuZGF0YS5wbGFuZXRzID0gcGxhbmV0cy5kYXRhLnllbGxvd3N0YXJUYWJsZTtcXG4gICAgICAgICAgICB0aGlzLmRhdGEubGV2ZWxzID0gcGxhbmV0TGV2ZWxzLmRhdGE7XFxuICAgICAgICAgICAgdGhpcy5kYXRhLnRyYWRpbmdTdGF0aW9ucyA9IHNwYWNlYnVpbGRpbmdzLmRhdGEuVHJhZGluZ1N0YXRpb247XFxuICAgICAgICAgIH0pXFxuICAgICAgICAgIC50aGVuKHRoaXMuZ2VuZXJhdGVJbnB1dFRhYmxlKVxcbiAgICAgICAgICAudGhlbih0aGlzLnVwZGF0ZU91dHB1dClcXG4gICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5hbGxEYXRhTG9hZGVkID0gdHJ1ZSlcXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xcbiAgICB9LFxcbiAgICBjcmVhdGVDZWxscygpIHtcXG4gICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XFxuICAgICAgICByb3dzLmZvckVhY2goKGUpID0+IChyZXN1bHRbZV0gPSAwKSk7XFxuXFxuICAgICAgICB0aGlzLiRzZXQodGhpcy5vdXRwdXQuY2FsY3VsYXRlZCwga2V5LCByZXN1bHQpO1xcbiAgICAgIH0pO1xcbiAgICAgIGtleXNUb3RhbC5mb3JFYWNoKChrZXkpID0+IHtcXG4gICAgICAgIHRoaXMuJHNldCh0aGlzLm91dHB1dC50b3RhbCwga2V5LCAwKTtcXG4gICAgICB9KTtcXG4gICAgfSxcXG4gICAgZ2VuZXJhdGVJbnB1dFRhYmxlKCkge1xcbiAgICAgIGNvbnN0IG9iaiA9IHtcXG4gICAgICAgIE5hbWU6IHRoaXMuZGF0YS5wbGFuZXRzLk5hbWUsXFxuICAgICAgICBNYXhVcGdyYWRlTGV2ZWw6IHRoaXMuZGF0YS5wbGFuZXRzLk1heFVwZ3JhZGVMZXZlbCxcXG5cXG4gICAgICAgIFRJRDogdGhpcy5kYXRhLnBsYW5ldHMuVElELFxcbiAgICAgICAgbWF4TGV2ZWw6IHRoaXMuZGF0YS5wbGFuZXRzLm1heExldmVsLFxcbiAgICAgIH07XFxuXFxuICAgICAgLy8g0LTQvtCx0LDQstC40YLRjCDRgtC+0YDQs9C4XFxuICAgICAgZm9yIChsZXQgaSA9IDA7IHRoaXMuZGF0YS50cmFkaW5nU3RhdGlvbnMuTWF4T25Pd25Tb2xhclN5c3RlbSA+IGk7IGkrKykge1xcbiAgICAgICAgb2JqLk5hbWUucHVzaCh0aGlzLmRhdGEudHJhZGluZ1N0YXRpb25zLk5hbWUgKyAnXycgKyBpKTtcXG4gICAgICAgIG9iai5NYXhVcGdyYWRlTGV2ZWwucHVzaCh0aGlzLmRhdGEudHJhZGluZ1N0YXRpb25zLm1heExldmVsKTtcXG5cXG4gICAgICAgIG9iai5USUQucHVzaCh0aGlzLmRhdGEudHJhZGluZ1N0YXRpb25zLlRJRCk7XFxuICAgICAgICBvYmoubWF4TGV2ZWwrKztcXG4gICAgICB9XFxuXFxuICAgICAgdGhpcy5pbnB1dC5rZXlzID0gb2JqLk5hbWU7XFxuICAgICAgdGhpcy5pbnB1dC5tYXhVcGdyYWRlTGV2ZWwgPSBvYmouTWF4VXBncmFkZUxldmVsO1xcblxcbiAgICAgIHRoaXMuaW5wdXQuc3RhdGljLmhlYWQucHVzaCgnVElEJyk7XFxuICAgICAgdGhpcy5pbnB1dC5zdGF0aWMuYm9keS5wdXNoKG9iai5USUQpO1xcbiAgICAgIHRoaXMuaW5wdXQuc3RhdGljLm1heExldmVsID0gb2JqLm1heExldmVsO1xcbiAgICB9LFxcbiAgICBnZXRGb3JtYXRLZXkoLi4uYXJncykge1xcbiAgICAgIGNvbnN0ICR0ID0gKGtleSkgPT4gdGhpcy4kdC5jYWxsKHRoaXMsIGtleSk7XFxuICAgICAgcmV0dXJuIGZvcm1hdEtleSgkdCwgdGhpcy5vYmpOYW1lLCAuLi5hcmdzKTtcXG4gICAgfSxcXG4gICAgZ2V0Rm9ybWF0VmFsdWUoLi4uYXJncykge1xcbiAgICAgIGNvbnN0ICR0ID0gKGtleSkgPT4gdGhpcy4kdC5jYWxsKHRoaXMsIGtleSk7XFxuICAgICAgY29uc3QgJHRlID0gKGtleSkgPT4gdGhpcy4kdGUuY2FsbCh0aGlzLCBrZXkpO1xcbiAgICAgIHJldHVybiBmb3JtYXRWYWx1ZSgkdCwgJHRlLCBudWxsLCAuLi5hcmdzKTtcXG4gICAgfSxcXG4gICAgaXNTZWxlY3RlZCh0eXBlLCBrZXlJbmRleCwgdmFsdWUpIHtcXG4gICAgICBjb25zdCBrZXkgPSB0aGlzLmlucHV0LmtleXNba2V5SW5kZXhdO1xcbiAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5zdG9yYWdlLnBsYW5ba2V5XSB8fCAwO1xcbiAgICAgIGNvbnN0IG1pbiA9IHRoaXMuc3RvcmFnZS5hY3R1YWxseVtrZXldO1xcblxcbiAgICAgIGlmIChtaW4gPiBjdXJyZW50KSB7XFxuICAgICAgICBjdXJyZW50ID0gdGhpcy5jaGFuZ2VMdmwoJ3BsYW4nLCBrZXksIG1pbik7XFxuICAgICAgfVxcbiAgICAgIGlmICh0eXBlID09ICdwbGFuJykge1xcbiAgICAgICAgcmV0dXJuICh2YWx1ZSA9PSBjdXJyZW50KTtcXG4gICAgICB9XFxuICAgICAgcmV0dXJuICh0aGlzLnN0b3JhZ2VbdHlwZV1ba2V5XSA9PSB2YWx1ZSk7XFxuICAgIH0sXFxuICAgIGlzRGlzYWJsZWQodHlwZSwga2V5SW5kZXgsIHZhbHVlKSB7XFxuICAgICAgY29uc3Qga2V5ID0gdGhpcy5pbnB1dC5rZXlzW2tleUluZGV4XTtcXG5cXG4gICAgICBpZiAodHlwZSAhPSAncGxhbicpIHJldHVybjtcXG4gICAgICBpZiAoIXRoaXMuc3RvcmFnZS5hY3R1YWxseSkgcmV0dXJuO1xcbiAgICAgIHJldHVybiAodmFsdWUgPCB0aGlzLnN0b3JhZ2UuYWN0dWFsbHlba2V5XSk7XFxuICAgIH0sXFxuICAgIHJlc2V0KGV2ZW50KSB7XFxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5uYW1lID09ICdhbGwnKSB7XFxuICAgICAgICBjb25zdCBtc2cgPSBjb25maXJtKCdSZXNldCBhbGw/IEFyIHUgc2VyaW91cyA/Jyk7XFxuICAgICAgICBpZiAobXNnKSB7XFxuICAgICAgICAgIHRoaXMuc3RvcmFnZSA9IHthY3R1YWxseToge30sIHBsYW46IHt9fTtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgIHJldHVybjtcXG4gICAgICAgIH1cXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgaWYgKHRoaXMuc3RvcmFnZS5wbGFuKSB7XFxuICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuc3RvcmFnZS5wbGFuKS5mb3JFYWNoKChrZXkpID0+IHtcXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UucGxhbltrZXldID0gdGhpcy5zdG9yYWdlLmFjdHVhbGx5W2tleV07XFxuICAgICAgICAgIH0pO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgdGhpcy5zdG9yYWdlLnBsYW4gPSB7fTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgICAgdGhpcy51cGRhdGVPdXRwdXQoKTtcXG4gICAgICAvLyBsb2NhdGlvbi5yZWxvYWQoKTtcXG4gICAgfSxcXG4gICAgY2hhbmdlTHZsKHR5cGUsIGtleSwgdmFsdWUpIHtcXG4gICAgICB2YWx1ZSA9IHBhcnNlSW50KHZhbHVlKTtcXG5cXG4gICAgICB0aGlzLiRzZXQodGhpcy5zdG9yYWdlW3R5cGVdLCBrZXksIHBhcnNlSW50KHZhbHVlKSk7XFxuICAgICAgdGhpcy51cGRhdGVPdXRwdXQoKTtcXG4gICAgICByZXR1cm4gdmFsdWU7XFxuICAgIH0sXFxuICAgIHVwZGF0ZVN0b3JhZ2UoKSB7XFxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTdG9yYWdlS2V5LCBKU09OLnN0cmluZ2lmeSh0aGlzLnN0b3JhZ2UpKTtcXG4gICAgfSxcXG4gICAgdXBkYXRlT3V0cHV0KCkge1xcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMub3V0cHV0LmNhbGN1bGF0ZWQ7XFxuICAgICAgY29uc3QgcmVzdWx0VG90YWwgPSB0aGlzLm91dHB1dC50b3RhbDtcXG4gICAgICBjb25zdCBpdGVtcyA9IHRoaXMuaW5wdXQua2V5cztcXG5cXG4gICAgICBjb25zdCBwbGFuZXRzID0gdGhpcy5kYXRhLnBsYW5ldHM7XFxuICAgICAgY29uc3QgbGV2ZWxzID0gdGhpcy5kYXRhLmxldmVscztcXG4gICAgICBjb25zdCB0cmFkaW5nU3RhdGlvbnMgPSB0aGlzLmRhdGEudHJhZGluZ1N0YXRpb25zO1xcblxcbiAgICAgIHRoaXMuY3JlYXRlQ2VsbHMoKTsgLy8g0LLQsNC50L/QvdGD0YLRjCDQt9C90LDRh9C10L3QuNGPXFxuICAgICAgdGhpcy51cGRhdGVTdG9yYWdlKCk7IC8vINGB0LjQvdGF0YDQvtC90LjQt9C40YDQvtCy0LDRgtGMINGF0YDQsNC90LjQu9C40YnQtVxcblxcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuc3RvcmFnZSkuZm9yRWFjaCgoa2V5KSA9PiB7XFxuICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHRoaXMuc3RvcmFnZVtrZXldKS5sZW5ndGgpIHJldHVybjtcXG5cXG4gICAgICAgIHVwZGF0ZUNvbChrZXksIHRoaXMuc3RvcmFnZVtrZXldKTtcXG4gICAgICB9KTtcXG5cXG4gICAgICBPYmplY3Qua2V5cyhyZXN1bHQpLmZvckVhY2goKGtleSkgPT4geyAvLyDQstGL0YfQuNGB0LvQuNGC0Ywg0L/RgNC40YDQvtGB0YIg0L/Qu9Cw0L3QsFxcbiAgICAgICAgcmVzdWx0W2tleV0ucGxhbiA9IChyZXN1bHRba2V5XS5wbGFuIC0gcmVzdWx0W2tleV0uYWN0dWFsbHkpO1xcbiAgICAgIH0pO1xcbiAgICAgIHVwZGF0ZUNvbCgncmVzdWx0JywgdGhpcy5zdG9yYWdlLnBsYW4pO1xcbiAgICAgIGNhbGN1bGF0ZVRvdGFsKHRoaXMuc3RvcmFnZSk7XFxuXFxuICAgICAgZnVuY3Rpb24gdXBkYXRlQ29sKG1vZGUsIG9iaikge1xcbiAgICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKChpdGVtKSA9PiB7XFxuICAgICAgICAgIGNvbnN0IGl0ZW1MdmwgPSBvYmpbaXRlbV0gLSAxO1xcbiAgICAgICAgICBjb25zdCBpdGVtSW5kZXggPSBpdGVtcy5pbmRleE9mKGl0ZW0pO1xcblxcbiAgICAgICAgICBpZiAoIW9ialtpdGVtXSkgcmV0dXJuO1xcbiAgICAgICAgICBPYmplY3Qua2V5cyhyZXN1bHQpLmZvckVhY2goKGtleSwgaW5kZXgpID0+IHtcXG4gICAgICAgICAgICBsZXQgbnVtMTtcXG4gICAgICAgICAgICBsZXQgbnVtMjtcXG5cXG4gICAgICAgICAgICBpZiAobW9kZSA9PSAncmVzdWx0JykgeyAvLyDQvtCx0L3QvtCy0LjRgtGMINGA0LXQt9GD0LvRjNGC0LDRglxcbiAgICAgICAgICAgICAgbnVtMSA9IHJlc3VsdFtrZXldLnBsYW47XFxuICAgICAgICAgICAgICBudW0yID0gcmVzdWx0W2tleV0uYWN0dWFsbHk7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgIG51bTEgPSByZXN1bHRba2V5XVttb2RlXSB8fCAwO1xcbiAgICAgICAgICAgICAgaWYgKGtleXNNb2RpZmllcnNbaW5kZXhdKSB7XFxuICAgICAgICAgICAgICAgIG51bTIgPSAobGV2ZWxzW2tleV1baXRlbUx2bF0gKiBwbGFuZXRzW2tleXNNb2RpZmllcnNbaW5kZXhdXVtpdGVtSW5kZXhdKSAvIDEwMDtcXG5cXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaW5jbHVkZXMoJ1RyYWRpbmdTdGF0aW9uJykpIHtcXG4gICAgICAgICAgICAgICAgICBudW0yID0gMDtcXG4gICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIGtleXNBbGlhc2VzVFMpIHtcXG4gICAgICAgICAgICAgICAgICAgIG51bTIgPSB0cmFkaW5nU3RhdGlvbnNba2V5c0FsaWFzZXNUU1trZXldXVtpdGVtTHZsXTtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIG51bTIgPSBsZXZlbHNba2V5XVtpdGVtTHZsXTtcXG4gICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgcmVzdWx0W2tleV1bbW9kZV0gPSBudW0xICsgbnVtMjtcXG4gICAgICAgICAgfSk7XFxuICAgICAgICB9KTtcXG4gICAgICB9XFxuICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlVG90YWwob2JqKSB7XFxuICAgICAgICBPYmplY3Qua2V5cyhvYmoucGxhbikuZm9yRWFjaCgoaXRlbSkgPT4ge1xcbiAgICAgICAgICBpZiAob2JqLnBsYW5baXRlbV0gPT0gMCkgcmV0dXJuO1xcbiAgICAgICAgICBPYmplY3Qua2V5cyhyZXN1bHRUb3RhbCkuZm9yRWFjaCgoa2V5KSA9PiB7XFxuICAgICAgICAgICAgbGV0IG51bTEgPSAwO1xcbiAgICAgICAgICAgIGxldCBudW0yID0gMDtcXG4gICAgICAgICAgICBjb25zdCBQbGFuSW5kZXhMdmwgPSBvYmoucGxhbltpdGVtXSAtIDE7XFxuICAgICAgICAgICAgY29uc3QgQWN0dWFsbHlJbmRleEx2bCA9IChvYmouYWN0dWFsbHlbaXRlbV0gfHwgMCkgLSAxO1xcblxcbiAgICAgICAgICAgIG51bTEgPSAocmVzdWx0VG90YWxba2V5XSA9PSB1bmRlZmluZWQpID8gMCA6IHJlc3VsdFRvdGFsW2tleV07XFxuICAgICAgICAgICAgZm9yIChsZXQgbGV2ZWwgPSBBY3R1YWxseUluZGV4THZsOyBQbGFuSW5kZXhMdmwgPiBsZXZlbDsgbGV2ZWwrKykge1xcbiAgICAgICAgICAgICAgbGV0IGRhdGEgPSBsZXZlbHNba2V5XVtsZXZlbCArIDFdIHx8IDA7XFxuXFxuICAgICAgICAgICAgICBpZiAoaXRlbS5pbmNsdWRlcygnVHJhZGluZ1N0YXRpb24nKSAmJiBrZXkgaW4ga2V5c0FsaWFzZXNUUykge1xcbiAgICAgICAgICAgICAgICBkYXRhID0gdHJhZGluZ1N0YXRpb25zW2tleXNBbGlhc2VzVFNba2V5XV1bbGV2ZWwgKyAxXSB8fCAwO1xcbiAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgbnVtMiA9IG51bTIgKyBkYXRhO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICByZXN1bHRUb3RhbFtrZXldID0gbnVtMSArIG51bTI7XFxuICAgICAgICAgIH0pO1xcbiAgICAgICAgfSk7XFxuICAgICAgfVxcbiAgICB9LFxcbiAgICBvdXRwdXRDbGFzc2VzVGFibGUodHlwZSwga2V5KSB7XFxuICAgICAgaWYgKHR5cGUgPT0gJ3BsYW4nKSB7XFxuICAgICAgICByZXR1cm4ge1xcbiAgICAgICAgICAncGxhbi1wbHVzJzogdGhpcy5vdXRwdXQuY2FsY3VsYXRlZFtrZXldLnBsYW4sXFxuICAgICAgICAgICdoaWRlJzogdGhpcy5vdXRwdXQuY2FsY3VsYXRlZFtrZXldLnBsYW4gPT0gMCxcXG4gICAgICAgIH07XFxuICAgICAgfVxcbiAgICAgIGlmICh0eXBlID09ICdyZXN1bHQnKSB7XFxuICAgICAgICBjb25zdCBpc0dyb3d0aCA9ICh0aGlzLm91dHB1dC5jYWxjdWxhdGVkW2tleV0uYWN0dWFsbHkgPCB0aGlzLm91dHB1dC5jYWxjdWxhdGVkW2tleV0ucmVzdWx0KTtcXG4gICAgICAgIGNvbnN0IGlzSGlkZSA9ICF0aGlzLm91dHB1dC50b3RhbFtPYmplY3Qua2V5cyh0aGlzLm91dHB1dC50b3RhbClbMF1dO1xcbiAgICAgICAgcmV0dXJuIHtcXG4gICAgICAgICAgJ3Jlc3VsdC1ncm93dGgnOiBpc0dyb3d0aCxcXG4gICAgICAgICAgJ3Jlc3VsdC1ub3QtZ3Jvd3RoJzogIWlzR3Jvd3RoLFxcbiAgICAgICAgICAnaGlkZSc6IGlzSGlkZSxcXG4gICAgICAgIH07XFxuICAgICAgfVxcbiAgICB9LFxcbiAgfSxcXG59O1xcbjwvc2NyaXB0PlxcblxcbjxzdHlsZSBzY29wZWQ+XFxuLnBsYW5ldHNDYWxjIHtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICM0MjQ1NDc7XFxuICBib3JkZXItc3BhY2luZzogMDtcXG4gIGNvbG9yOiAjYWFiMmI2O1xcblxcbiAgd2lkdGg6IDkwJTtcXG4gIG1heC13aWR0aDogNDUwcHg7XFxuICBtYXJnaW46IDE1cHggYXV0bztcXG59XFxuLnBsYW5ldHNDYWxjID4+PiB0ZCB7XFxuICBwYWRkaW5nOiA4cHggMTBweCA4cHg7XFxuICBsaW5lLWhlaWdodDogMTZweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGZvbnQtc2l6ZTogNzUlO1xcbiAgYm9yZGVyOiBub25lO1xcbn1cXG4ucGxhbmV0c0NhbGMgdGQ6Zmlyc3QtY2hpbGQge1xcbiAgdGV4dC1hbGlnbjogbGVmdDtcXG59XFxuLnBsYW5ldHNDYWxjIHRyLnRvdGFsIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoOSwgMTIsIDEyLCAwLjk5KTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbn1cXG5cXG4uaGlkZSB7XFxuICB2aXNpYmlsaXR5OiBjb2xsYXBzZTtcXG59XFxuLnBsYW4tcGx1cyB7XFxuICBjb2xvcjogI2ZmZjE5ZjtcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxufVxcbi5wbGFuLXBsdXM6YmVmb3JlIHtcXG4gIGNvbnRlbnQ6IFxcXCIrXFxcIjtcXG59XFxuLnJlc3VsdC1ncm93dGgge1xcbiAgY29sb3I6ICMxZTdlMzQ7XFxufVxcbi5yZXN1bHQtbm90LWdyb3d0aHtcXG4gIG9wYWNpdHk6IDAuNTtcXG59XFxuXFxuLnJlc2V0QnV0dG9ucyB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiByaWdodDtcXG4gIHBhZGRpbmctcmlnaHQ6IDMlO1xcbn1cXG4ucmVzZXRCdXR0b25zIGJ1dHRvbiB7XFxuICBjb2xvcjogI2ZmZjtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIGJhY2tncm91bmQtY29sb3I6IFRyYW5zcGFyZW50O1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2Y3Y2ExODtcXG4gIHRyYW5zaXRpb246IGFsbCAwLjRzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKTtcXG4gIHBhZGRpbmc6IDEwcHggMTBweDtcXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XFxufVxcbi5yZXNldEJ1dHRvbnMgYnV0dG9uOmhvdmVyIHtcXG4gIGNvbG9yOiAjMDAwO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XFxufVxcbi5yZXNldEJ1dHRvbnMgYnV0dG9uOmhvdmVyOmJlZm9yZSB7XFxuICBsZWZ0OiAwO1xcbiAgcmlnaHQ6IGF1dG87XFxuICB3aWR0aDogMTAwJTtcXG59XFxuLnJlc2V0QnV0dG9ucyBidXR0b246YmVmb3JlIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMDtcXG4gIHJpZ2h0OiAwO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgd2lkdGg6IDA7XFxuICB6LWluZGV4OiAtMTtcXG4gIGNvbnRlbnQ6IFxcXCJcXFwiO1xcbiAgYmFja2dyb3VuZDogI2Y3Y2ExODtcXG4gIHRyYW5zaXRpb246IGFsbCAwLjRzIGN1YmljLWJlemllcigwLjQyLCAwLCAwLjU4LCAxKTtcXG59XFxuLnJlc2V0QnV0dG9uQWxsIHtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjOTAwMDAgIWltcG9ydGFudDtcXG59XFxuLnJlc2V0QnV0dG9uQWxsOmJlZm9yZSB7XFxuICBiYWNrZ3JvdW5kOiAjYzkwMDAwICFpbXBvcnRhbnQ7XFxufVxcbjwvc3R5bGU+XFxuXCJdfV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJ2YXIgcmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gIHZhciBfdm0gPSB0aGlzXG4gIHZhciBfaCA9IF92bS4kY3JlYXRlRWxlbWVudFxuICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2hcbiAgcmV0dXJuIF9jKFxuICAgIFwiZGl2XCIsXG4gICAgW1xuICAgICAgX2MoXG4gICAgICAgIFwidGFibGVcIixcbiAgICAgICAgeyBzdGF0aWNDbGFzczogXCJwbGFuZXRzQ2FsY1wiIH0sXG4gICAgICAgIFtcbiAgICAgICAgICBfdm0uX2woX3ZtLm91dHB1dC5jYWxjdWxhdGVkLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gX2MoXG4gICAgICAgICAgICAgIFwidHJcIixcbiAgICAgICAgICAgICAgeyBrZXk6IGtleSB9LFxuICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgX2MoXCJ0ZFwiLCBbX3ZtLl92KF92bS5fcyhfdm0uZ2V0Rm9ybWF0S2V5KGtleSkpKV0pLFxuICAgICAgICAgICAgICAgIF92bS5fdihcIiBcIiksXG4gICAgICAgICAgICAgICAgX3ZtLl9sKHZhbHVlLCBmdW5jdGlvbihpdGVtLCBpdGVtS2V5KSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gX2MoXG4gICAgICAgICAgICAgICAgICAgIFwidGRcIixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5ICsgaXRlbUtleSxcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzczogX3ZtLm91dHB1dENsYXNzZXNUYWJsZShpdGVtS2V5LCBrZXkpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgICAgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3MoaXRlbS50b0xvY2FsZVN0cmluZygpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAyXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSksXG4gICAgICAgICAgX3ZtLl92KFwiIFwiKSxcbiAgICAgICAgICBfdm0uX2woX3ZtLm91dHB1dC50b3RhbCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIF9jKFwidHJcIiwgeyBrZXk6IGtleSwgc3RhdGljQ2xhc3M6IFwidG90YWxcIiB9LCBbXG4gICAgICAgICAgICAgIF9jKFwidGRcIiwgW192bS5fdihfdm0uX3MoX3ZtLiR0KGtleSkpKV0pLFxuICAgICAgICAgICAgICBfdm0uX3YoXCIgXCIpLFxuICAgICAgICAgICAgICBfYyhcInRkXCIsIHsgYXR0cnM6IHsgY29sc3BhbjogXCIzXCIgfSB9LCBbXG4gICAgICAgICAgICAgICAgX3ZtLl92KFxuICAgICAgICAgICAgICAgICAgXCJcXG4gICAgICAgIFwiICtcbiAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKF92bS5nZXRGb3JtYXRWYWx1ZShrZXksIHZhbHVlKSkgK1xuICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgIFwiXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgXSlcbiAgICAgICAgICB9KVxuICAgICAgICBdLFxuICAgICAgICAyXG4gICAgICApLFxuICAgICAgX3ZtLl92KFwiIFwiKSxcbiAgICAgIF9jKFwiZGl2XCIsIHsgc3RhdGljQ2xhc3M6IFwicmVzZXRCdXR0b25zXCIgfSwgW1xuICAgICAgICBfYyhcImJ1dHRvblwiLCB7IGF0dHJzOiB7IG5hbWU6IFwicGxhblwiIH0sIG9uOiB7IGNsaWNrOiBfdm0ucmVzZXQgfSB9LCBbXG4gICAgICAgICAgX3ZtLl92KFwiXFxuICAgICAgXCIgKyBfdm0uX3MoX3ZtLiR0KFwicmVzZXRQbGFuXCIpKSArIFwiXFxuICAgIFwiKVxuICAgICAgICBdKSxcbiAgICAgICAgX3ZtLl92KFwiIFwiKSxcbiAgICAgICAgX2MoXG4gICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdGF0aWNDbGFzczogXCJyZXNldEJ1dHRvbkFsbFwiLFxuICAgICAgICAgICAgYXR0cnM6IHsgbmFtZTogXCJhbGxcIiB9LFxuICAgICAgICAgICAgb246IHsgY2xpY2s6IF92bS5yZXNldCB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBbX3ZtLl92KFwiXFxuICAgICAgXCIgKyBfdm0uX3MoX3ZtLiR0KFwicmVzZXRBbGxcIikpICsgXCJcXG4gICAgXCIpXVxuICAgICAgICApXG4gICAgICBdKSxcbiAgICAgIF92bS5fdihcIiBcIiksXG4gICAgICBfdm0uYWxsRGF0YUxvYWRlZFxuICAgICAgICA/IF9jKFwidi10YWJsZVwiLCB7XG4gICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICBcIm9iai1uYW1lXCI6IFwicGxhbmV0c0NhbGNcIixcbiAgICAgICAgICAgICAgaGVhZDogX3ZtLmlucHV0LnN0YXRpYy5oZWFkLFxuICAgICAgICAgICAgICBib2R5OiBfdm0uaW5wdXQuc3RhdGljLmJvZHksXG4gICAgICAgICAgICAgIFwibWF4LWxldmVsXCI6IF92bS5pbnB1dC5zdGF0aWMubWF4TGV2ZWwsXG4gICAgICAgICAgICAgIFwibHZsLWNvbC1rZXlcIjogXCLihJZcIixcbiAgICAgICAgICAgICAgXCJtZXJnZS1jZWxsc1wiOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNjb3BlZFNsb3RzOiBfdm0uX3UoXG4gICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6IFwiaGVhZFwiLFxuICAgICAgICAgICAgICAgICAgZm46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgIF9jKFwidGhcIiwgW192bS5fdihfdm0uX3MoX3ZtLiR0KFwibHZsXCIpKSldKSxcbiAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXCIgXCIpLFxuICAgICAgICAgICAgICAgICAgICAgIF9jKFwidGhcIiwgW192bS5fdihfdm0uX3MoX3ZtLiR0KFwicGxhblwiKSkpXSlcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHByb3h5OiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6IFwiYm9keVwiLFxuICAgICAgICAgICAgICAgICAgZm46IGZ1bmN0aW9uKHJlZikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGV2ZWwgPSByZWYubGV2ZWxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5fbChbXCJhY3R1YWxseVwiLCBcInBsYW5cIl0sIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2MoXCJ0ZFwiLCB7IGtleTogdHlwZSB9LCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLmNoYW5nZUx2bChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5pbnB1dC5rZXlzW2xldmVsXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fbChfdm0uaW5wdXQubWF4VXBncmFkZUxldmVsW2xldmVsXSArIDEsIGZ1bmN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB0eXBlICsgaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3ZtLmlzRGlzYWJsZWQodHlwZSwgbGV2ZWwsIGluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21Qcm9wczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBfdm0uaXNTZWxlY3RlZCh0eXBlLCBsZXZlbCwgaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgICAgICAgIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhpbmRleCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG4gICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgIDM1ODUxMTg2ODJcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICA6IF92bS5fZSgpXG4gICAgXSxcbiAgICAxXG4gIClcbn1cbnZhciBzdGF0aWNSZW5kZXJGbnMgPSBbXVxucmVuZGVyLl93aXRoU3RyaXBwZWQgPSB0cnVlXG5cbmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2xvYWRlcnMvc3R5bGVQb3N0TG9hZGVyLmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vVGhlUGxhbmV0c0NhbGMudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9MGM3YzUxM2Umc2NvcGVkPXRydWUmbGFuZz1jc3MmXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciBhZGQgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXNDbGllbnQuanNcIikuZGVmYXVsdFxudmFyIHVwZGF0ZSA9IGFkZChcIjQ5NzE1NjQ3XCIsIGNvbnRlbnQsIGZhbHNlLCB7fSk7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG4gLy8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3NcbiBpZighY29udGVudC5sb2NhbHMpIHtcbiAgIG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9UaGVQbGFuZXRzQ2FsYy52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0wYzdjNTEzZSZzY29wZWQ9dHJ1ZSZsYW5nPWNzcyZcIiwgZnVuY3Rpb24oKSB7XG4gICAgIHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2xvYWRlcnMvc3R5bGVQb3N0TG9hZGVyLmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vVGhlUGxhbmV0c0NhbGMudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9MGM3YzUxM2Umc2NvcGVkPXRydWUmbGFuZz1jc3MmXCIpO1xuICAgICBpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcbiAgICAgdXBkYXRlKG5ld0NvbnRlbnQpO1xuICAgfSk7XG4gfVxuIC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3NcbiBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iXSwic291cmNlUm9vdCI6IiJ9